name: Deploy with API Key
env:
    JSONBIN_MASTER_KEY: ${{ secrets.JSONBIN_MASTER_KEY }}
  run: |
    mkdir -p src  # Ã–nce klasÃ¶rÃ¼ oluÅŸtur
    echo "const CONFIG = { API_KEY: '$JSONBIN_MASTER_KEY' };" > src/config.js
on:
  push:
    branches: [ "main" ]  # main branch'e push yapÄ±ldÄ±ÄŸÄ±nda tetikle

jobs:
  build:
    runs-on: ubuntu-latest  # GitHub'Ä±n saÄŸladÄ±ÄŸÄ± Linux makinede Ã§alÄ±ÅŸtÄ±r

    steps:
      # 1. AdÄ±m: Kodu repodan al
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. AdÄ±m: API Key'i kullanarak config dosyasÄ± oluÅŸtur
      - name: Setup API Key
        env:
          JSONBIN_MASTER_KEY: ${{ secrets.JSONBIN_MASTER_KEY }}  # ğŸ”‘ Secret burada!
        run: |
          echo "const CONFIG = { API_KEY: '$JSONBIN_MASTER_KEY' };" > src/config.js
          echo "âœ… API Key config dosyasÄ± oluÅŸturuldu"

      # 3. AdÄ±m: Projeyi build et (Ã¶rnek npm projesi)
      - name: Install dependencies
        run: npm install

      - name: Build project
        run: npm run build

      # 4. AdÄ±m: GitHub Pages'e deploy et
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}  # GitHub'Ä±n otomatik token'Ä±
          publish_dir: ./dist  # Build Ã§Ä±ktÄ±sÄ±nÄ±n olduÄŸu klasÃ¶r
