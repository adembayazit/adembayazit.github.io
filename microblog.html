<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tüm Entry'ler - Adem Bayazıt</title>
    <link rel="icon" type="image/png" href="/IMAGES/ab.png">
    <link rel="stylesheet" href="/CSS/style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.0/css/flag-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Open Graph (Facebook, WhatsApp, LinkedIn vs.) -->   
    <meta property="og:title" content="Adem Bayazıt | All Microblog Entries" />
    <meta property="og:description" content="Explore all entries in Adem Bayazıt's cybersecurity microblog." />
    <meta property="og:image" content="https://adembayazit.com/IMAGES/preview.png" />
    <meta property="og:url" content="https://adembayazit.com/microblog.html" />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Adem Bayazıt - All Microblog Entries">
    <meta name="twitter:description" content="Explore all entries in Adem Bayazıt's cybersecurity microblog.">
    <meta name="twitter:image" content="https://adembayazit.com/IMAGES/preview.png">
    <meta name="twitter:image:alt" content="Adem Bayazıt">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TFN7XD9Z');</script>
    <!-- End Google Tag Manager -->
    <style>
        html {
          scroll-behavior: smooth;
        }
        /* Özel stiller */
        .microblog-container {
            width: 100%;
            padding: 60px 10%;
            background: transparent;
            margin-top: 80px;
            position: relative;
            z-index: 1;
        }
        
        .entries-container {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid limegreen;
            border-radius: 20px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.1);
            backdrop-filter: blur(5px);
        }
        
        .load-more-container {
            text-align: center;
            margin-top: 20px;
        }
        
        .load-more-btn {
            background: green;
            color: black;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .load-more-btn:hover {
            background: #00cc00;
            box-shadow: 0 0 10px limegreen;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: limegreen;
        }
        
        .back-to-home {
            display: inline-block;
            margin: 30px 0; /* Daha fazla boşluk eklendi */
            color: limegreen;
            text-decoration: none;
            font-weight: bold;
            font-size: 16px;
        }
        
        .back-to-home:hover {
            text-decoration: underline;
            color: #00ff00;
        }
        
        .entry-count {
            color: #90ee90;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        /* Dropdown stilleri */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropbtn {
            font-size: 18px;
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            margin-left: 10px;
            cursor: pointer;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: green;
            min-width: 160px;
            z-index: 100;
            border: 1px solid white;
            border-radius: 10px;
        }

        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            color: white;
            background-color: limegreen;
            text-shadow: 0 0 10px green;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

      /* Matrix Canvas için stiller */
        #matrixCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Başlık stili */
        .section-title {
            text-align: left;
            margin-bottom: 25px;
            color: white;
            display: flex;
            align-items: center;
            filter: drop-shadow(0 0 5px limegreen);
            gap: 10px;
        }

        /* Son entry için özel stil */
        .latest-entry {
            border: 2px solid #ffcc00 !important;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.4) !important;
            background: rgba(255, 204, 0, 0.1) !important;
            position: relative;
            order: -1; /* Başa taşı */
        }

        .latest-entry::before {
            content: "EN SON EKLENEN";
            position: absolute;
            top: -12px;
            right: 15px;
            background: #ffcc00;
            color: black;
            font-size: 12px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            z-index: 10;
        }

        /* Parent entry için özel stil */
        .parent-of-latest {
            border: 2px solid #ff9900 !important;
            box-shadow: 0 0 15px rgba(255, 153, 0, 0.4) !important;
            background: rgba(255, 153, 0, 0.1) !important;
            position: relative;
            order: -2; /* En son eklenenden önce */
        }

        .parent-of-latest::before {
            content: "PARENT ENTRY";
            position: absolute;
            top: -12px;
            right: 15px;
            background: #ff9900;
            color: black;
            font-size: 12px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            z-index: 10;
        }

        /* Mobil için stiller */
        @media (max-width: 768px) {
            .microblog-container {
                padding: 60px 5%;
            }
            
            .back-to-home {
                margin: 25px 0; /* Mobilde de yeterli boşluk */
            }
            
            .section-title {
                text-align: center; /* Mobilde ortala */
                justify-content: center; /* İkonları da ortala */
                filter: drop-shadow(0 0 5px limegreen);
                color:white;
            }

            .latest-entry::before,
            .parent-of-latest::before {
                right: 50%;
                transform: translateX(50%);
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TFN7XD9Z"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Matrix Arka Plan Canvas'ı -->
    <canvas id="matrixCanvas"></canvas>

    <header class="header">
        <a href="/" class="logo"><img src="IMAGES/hackerwhite.svg" alt="Hacker Icon" class="hackerwhite-icon">{adembayazit} </a>
        <nav class="navbar">
            <div class="dropdown">
                <a href="#" style="--i:5;" class="dropbtn"> <img src="IMAGES/Ata.svg" alt="Ata Icon" class="ata-icon"><span class="fi fi-tr"></span> <span class='bx bx-code-alt'></span> Ethical Hacker <span class='bx bx-chevron-down'></span></a>
                <div class="dropdown-content">
                    <a href="#tools"><img src="IMAGES/hackerwhite.svg" alt="Hacker Icon" class="hacker-icon"> What is an Ethical Hacker?</a>
                    <a href="#reports"><img src="IMAGES/glossary.svg" alt="Glossary" class="glossary-icon"> Cybersecurity Glossary</a>
                    <a href="#payloads"><img src="IMAGES/soc.svg" alt="Soc" class="soc-icon"> What is a SOC ?</a>
                    <a href="#payloads"><img src="IMAGES/vulnerabilities.svg" alt="Vulnerabilities" class="vulnerabilities-icon"> Vulnerabilities</a>
                    <a href="#payloads"><img src="IMAGES/steganography.svg" alt="Steganography" class="steganography-icon"> Steganography</a>
                    <a href="#payloads"><img src="IMAGES/cryptography.svg" alt="Cryptography" class="cryptography-icon"> Cryptography</a>    
                    <a href="#payloads"><img src="IMAGES/education.svg" alt="Education" class="education-icon"> Cybersecurity Learning Resources</a>
                </div>
            </div>
        </nav>
    </header>

    <section class="microblog-container">
        <a href="/" class="back-to-home"><i class='bx bx-arrow-back'></i> Back to Home</a>
        <h2 class="section-title"><i class="fa-solid fa-pager"></i> All LadyB<span class="fa-solid fa-bug bug-icon"></span>G Entries</h2>
        <div class="entry-count" id="entryCount">Total 0 Entry</div>
        <div id="entries" class="entries-container"></div>
        <div class="loading" id="loading">Loading...</div>
        <div class="load-more-container">
            <button id="loadMoreBtn" class="load-more-btn">More Entry (20) <span class='bx bx-chevron-down'></span></button>
        </div>
    </section>

    <footer style="text-align: center; padding: 20px; font-size: 14px; color: white; margin-top: 50px; position: relative; z-index: 1;">
        <hr style="margin-bottom: 10px; border-color: limegreen;" />
        <p>Design & Code by <strong>Adem Bayazıt</strong> | Version 1.3.2 | July 2025</p>
    </footer>

    <!-- Sarı Nokta (IP Göstergesi) -->
    <script>
        const dot = document.createElement('div');
        dot.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 18px;
            height: 18px;
            background: #f9d71c;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 10px rgba(50, 205, 50, 0.8);
            cursor: pointer;
            z-index: 9999;
            transition: all 0.3s;
        `;

        const tooltip = document.createElement('div');
        tooltip.style.cssText = `
            position: absolute;
            bottom: 100%;
            right: 0;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
            font-family: Arial, sans-serif;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            min-width: 240px;
            backdrop-filter: blur(5px);
        `;

        dot.appendChild(tooltip);
        document.body.appendChild(dot);

        dot.addEventListener('mouseenter', () => tooltip.style.opacity = '1');
        dot.addEventListener('mouseleave', () => tooltip.style.opacity = '0');
        fetch('https://ipinfo.io/json?token=68a1229187303a')
            .then(async res => {
                if (!res.ok) {
                    const text = await res.text();
                    throw new Error(`Hatalı cevap (${res.status}): ${text}`);
                }
                return res.json();
            })
            .then(data => {
                const now = new Date();
                const {
                    ip, hostname, city, region,
                    country, loc, org, postal, timezone
                } = data;

                tooltip.innerHTML = `
                    <div style="margin-bottom: 3px; font-weight: bold; color: #00ff00;">✓ User IP Detected</div>
                    <div><strong>IP:</strong> ${ip}</div>
                    <div><strong>Host:</strong> ${hostname}</div>
                    <div><strong>City:</strong> ${city}</div>
                    <div><strong>Country:</strong> ${country}</div>
                    <div><strong>Location</strong> ${loc}</div>
                    <div><strong>Postal:</strong> ${postal}</div>
                    <div><strong>Org:</strong> ${org}</div>
                    <div><strong>Time:</strong> ${now.toLocaleString('tr-TR')}</div>
                    <div style="font-size: 9px; margin-top: 4px; color: #ccc;">${navigator.userAgent.split(' ')[0]}</div>
                `;

                // POST ile Netlify fonksiyonuna gönder
                fetch('https://adembayazit.netlify.app/.netlify/functions/log-visitor', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ip, hostname, city, region,
                        country, loc, org, postal,
                        timezone, timestamp: now.toISOString(),
                        userAgent: navigator.userAgent
                    })
                }).then(res => res.json())
                    .then(console.log)
                    .catch(err => console.error("POST hatası:", err));
            })
            .catch(error => {
                const now = new Date();
                tooltip.innerHTML = `
                    <div style="margin-bottom: 5px; font-weight: bold; color: #ff5555;">❌ Hata</div>
                    <div><strong>Zaman:</strong> ${now.toLocaleString('tr-TR')}</div>
                    <div><strong>Mesaj:</strong> ${error.message}</div>
                `;
                dot.style.background = "#ff5555";
            });
    </script>

    <script>
        // 1. GLOBAL DEĞİŞKENLER
        const likesCache = {
          data: {},
          lastUpdated: 0,
          isUpdating: false
        };

        const pinsCache = {
          data: {},
          lastUpdated: 0,
          isUpdating: false
        };

        let allEntries = [];
        let parentEntries = [];
        let displayedEntries = 0;
        const entriesPerPage = 20;
        let latestEntryId = null; // En son eklenen entry ID'sini saklamak için
        let parentOfLatestId = null; // En son eklenen entry'nin parent ID'sini saklamak için

        // 2. PROXY HELPER FONKSİYONU
        async function fetchViaProxy(path, method = 'GET', body = null) {
          const proxyUrl = 'https://adembayazit.netlify.app/.netlify/functions/jsonbin-proxy';
          
          try {
            const response = await fetch(proxyUrl, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({ path, method, body })
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            return await response.json();
          } catch (error) {
            console.error('Proxy error:', error);
            throw error;
          }
        }

        // 3. TEMEL FONKSİYONLAR
        async function loadInteractions() {
          try {
            const result = await fetchViaProxy('/b/68862fd97b4b8670d8a81945/latest');
            likesCache.data = result.likes || {};
            pinsCache.data = result.pins || {};
            likesCache.lastUpdated = pinsCache.lastUpdated = Date.now();
          } catch (error) {
            console.error('loadInteractions error:', error);
            try {
              const localLikes = localStorage.getItem('entryLikes') || '{}';
              const localPins = localStorage.getItem('entryPins') || '{}';
              likesCache.data = JSON.parse(localLikes);
              pinsCache.data = JSON.parse(localPins);
            } catch (parseError) {
              console.Error('Local storage parse error:', parseError);
            }
          }
        }

        // HTML içeriğini düzgün işlemek için yardımcı fonksiyon
        function formatContent(content) {
          // <br> etiketlerini doğru şekilde işle
          content = content.replace(/<br\s*\/?>/gi, '<br>');
          
          // <p></p> boş paragrafları kaldır (isteğe bağlı)
          content = content.replace(/<p>\s*<\/p>/gi, '');
          
          return content;
        }

        // ÇEVİRİ İKONLARINI EKLEME FONKSİYONU
        async function addTranslationIcons() {
          const entries = document.querySelectorAll(".entry");
          if (entries.length === 0) return;

          entries.forEach(entry => {
            const idDiv = entry.querySelector(".entry-id");
            const contentDiv = entry.querySelector(".content");
            const originalContent = contentDiv?.innerHTML?.trim();
            if (!idDiv || !originalContent) return;
            
            if (idDiv.querySelector(".translation-icon")) return;

            const idValue = parseInt(idDiv.textContent.replace(/\D/g, ''));
            if (isNaN(idValue)) return;

            const translationEntry = allEntries.find(item => item.id === idValue);
            
            if (!translationEntry?.content_tr) return;

            const icon = document.createElement("span");
            icon.classList.add("translation-icon", "fi", "fi-tr");
            icon.title = "Çeviriyi göster/gizle";
            
            const langCode = translationEntry?.lang || 'tr';
            icon.classList.add(`fi-${langCode}`);

            icon.addEventListener("click", (e) => {
              e.stopPropagation();
              icon.classList.toggle("active");
              
              if (icon.classList.contains("active")) {
                if (translationEntry.content_tr) {
                  // HTML içeriğini düzgün şekilde işle
                  contentDiv.innerHTML = formatContent(translationEntry.content_tr);
                }
              } else {
                contentDiv.innerHTML = originalContent;
              }
            });

            document.addEventListener("click", (e) => {
              if (!icon.contains(e.target) && !contentDiv.contains(e.target)) {
                icon.classList.remove("active");
                contentDiv.innerHTML = originalContent;
              }
            });

            idDiv.appendChild(icon);
          });
        }

        function createEntryElement(entry, depth = 0) {
          const entryDiv = document.createElement("div");
          entryDiv.className = `entry ${depth > 0 ? 'child-entry' : ''}`;
          
          // En son eklenen entry ise özel sınıf ekle
          if (entry.id === latestEntryId) {
            entryDiv.classList.add('latest-entry');
          }
          
          // En son eklenen entry'nin parent'i ise özel sınıf ekle
          if (entry.id === parentOfLatestId) {
            entryDiv.classList.add('parent-of-latest');
          }
          
          if (depth > 0) {
            entryDiv.style.marginLeft = (depth * 30) + 'px';
          }

          const time = new Date(entry.date).toLocaleString("tr-TR", {
            year: "numeric", 
            month: "2-digit", 
            day: "2-digit", 
            hour: "2-digit", 
            minute: "2-digit"
          }).replace(",", "");

          const likeCount = likesCache.data[entry.id] || 0;
          const pinCount = pinsCache.data[entry.id] || 0;

          // HTML içeriğini formatla
          const formattedContent = formatContent(entry.content);

          entryDiv.innerHTML = `
            <div class="timestamp">
              <span class="fa-solid fa-bug bug-iconentry"></span> ${time}
            </div>
            <div class="entry-id">#${entry.id}</div>
            <div class="content">${formattedContent}</div>
            <div class="interaction-buttons">
              <div class="daisy-like" data-entry-id="${entry.id}">
                <img src="/IMAGES/daisy.svg" class="daisy-icon" alt="Beğen" />
                <span class="like-count">${likeCount}</span>
              </div>
              <div class="pine-pin" data-entry-id="${entry.id}">
                <img src="/IMAGES/pine.svg" class="pine-icon" alt="Pinle" />
                <span class="pin-count">${pinCount}</span>
              </div>
            </div>
          `;

          const likeIcon = entryDiv.querySelector(".daisy-icon");
          likeIcon?.addEventListener("click", () => handleLikeClick(entry.id, entryDiv));

          const pinIcon = entryDiv.querySelector(".pine-icon");
          pinIcon?.addEventListener("click", () => handlePinClick(entry.id, entryDiv));

          return entryDiv;
        }

        function displayEntries(startIndex, count) {
          const container = document.getElementById("entries");
          const loadingElement = document.getElementById("loading");
          const loadMoreBtn = document.getElementById("loadMoreBtn");
          
          if (startIndex >= parentEntries.length) {
            loadMoreBtn.style.display = 'none';
            return;
          }
          
          loadingElement.style.display = 'block';
          
          // Yeni parent entry'leri ekle
          const endIndex = Math.min(startIndex + count, parentEntries.length);
          for (let i = startIndex; i < endIndex; i++) {
            const parentEntry = parentEntries[i];
            const entryElement = createEntryElement(parentEntry, 0);
            
            // En son eklenen entry veya parent ise container'ın en başına ekle
            if (parentEntry.id === latestEntryId || parentEntry.id === parentOfLatestId) {
              container.insertBefore(entryElement, container.firstChild);
            } else {
              container.appendChild(entryElement);
            }
            
            // Bu parent entry'nin child entry'lerini bul ve ekle
            const childEntries = allEntries.filter(e => 
              e.references && e.references.includes(parentEntry.id)
            );
            
            childEntries.forEach(childEntry => {
              const childElement = createEntryElement(childEntry, 1);
              
              // En son eklenen entry ise container'ın en başına ekle
              if (childEntry.id === latestEntryId) {
                container.insertBefore(childElement, container.firstChild);
              } else {
                // Child entry'leri parent'ın hemen altına ekle
                const nextElement = entryElement.nextSibling;
                if (nextElement) {
                  container.insertBefore(childElement, nextElement);
                } else {
                  container.appendChild(childElement);
                }
              }
            });
          }
          
          displayedEntries = endIndex;
          document.getElementById('entryCount').textContent = `Total ${allEntries.length} entries loaded`;
          
          // Çeviri ikonlarını ekle
          addTranslationIcons();
          
          loadingElement.style.display = 'none';
          
          // Tüm parent entry'ler gösterildiyse butonu gizle
          if (displayedEntries >= parentEntries.length) {
            loadMoreBtn.style.display = 'none';
          }
        }

        // 4. INTERACTION FONKSİYONLARI
        async function handleLikeClick(entryId, entryDiv) {
          if (likesCache.isUpdating) return;

          likesCache.isUpdating = true;
          const likeCountSpan = entryDiv.querySelector(".like-count");
          const likeIcon = entryDiv.querySelector(".daisy-icon");
          const currentCount = parseInt(likeCountSpan.textContent) || 0;

          try {
            likeCountSpan.textContent = currentCount + 1;
            likeIcon.style.transform = 'scale(1.2)';
            
            likesCache.data[entryId] = currentCount + 1;
            localStorage.setItem('entryLikes', JSON.stringify(likesCache.data));
            
            await updateInteractionsOnServer(entryId, currentCount + 1, null);
            likesCache.lastUpdated = Date.now();
          } catch (error) {
            console.error('Like update failed:', error);
            likeCountSpan.textContent = currentCount;
            likesCache.data[entryId] = currentCount;
          } finally {
            likesCache.isUpdating = false;
            setTimeout(() => {
              likeIcon.style.transform = 'scale(1)';
            }, 300);
          }
        }

        async function handlePinClick(entryId, entryDiv) {
          if (pinsCache.isUpdating) return;

          pinsCache.isUpdating = true;
          const pinCountSpan = entryDiv.querySelector(".pin-count");
          const pinIcon = entryDiv.querySelector(".pine-icon");
          const currentCount = parseInt(pinCountSpan.textContent) || 0;

          try {
            pinCountSpan.textContent = currentCount + 1;
            pinIcon.classList.add("pinned");
            
            pinsCache.data[entryId] = currentCount + 1;
            localStorage.setItem('entryPins', JSON.stringify(pinsCache.data));
            
            await updateInteractionsOnServer(entryId, null, currentCount + 1);
            pinsCache.lastUpdated = Date.now();
          } catch (error) {
            console.error('Pin update failed:', error);
            pinCountSpan.textContent = currentCount;
            pinsCache.data[entryId] = currentCount;
          } finally {
            pinsCache.isUpdating = false;
            setTimeout(() => {
              pinIcon.classList.remove("pinned");
            }, 600);
          }
        }

        async function updateInteractionsOnServer(entryId, newLikeCount, newPinCount) {
          const updatedLikes = newLikeCount !== null ? { ...likesCache.data, [entryId]: newLikeCount } : likesCache.data;
          const updatedPins = newPinCount !== null ? { ...pinsCache.data, [entryId]: newPinCount } : pinsCache.data;

          try {
            await fetchViaProxy('/b/68862fd97b4b8670d8a81945', 'PUT', {
              likes: updatedLikes,
              pins: updatedPins
            });
          } catch (error) {
            throw new Error('Failed to update data on server');
          }
        }

        // 5. BAŞLANGIÇ FONKSİYONU
        async function initializeApp() {
          try {
            await loadInteractions();
            const entriesData = await fetchViaProxy('/b/68933248ae596e708fc2fbbc/latest');
            allEntries = entriesData.records || entriesData;
            
            // Tüm entry'leri tarihe göre yeniden eskiye sırala
            allEntries.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // En son eklenen entry'nin ID'sini bul
            if (allEntries.length > 0) {
              latestEntryId = allEntries[0].id;
              
              // En son eklenen entry'nin parent'ını bul
              const latestEntry = allEntries.find(entry => entry.id === latestEntryId);
              if (latestEntry && latestEntry.references && latestEntry.references.length > 0) {
                parentOfLatestId = latestEntry.references[0];
              }
            }
            
            // Parent entry'leri bul (references'i olmayan)
            parentEntries = allEntries.filter(entry => !entry.references || entry.references.length === 0);
            
            // Parent entry'leri tarihe göre sırala (yeniden eskiye)
            parentEntries.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // En son eklenen entry ve parent'ını başa taşı
            if (latestEntryId) {
              // Önce parent'ı başa al
              if (parentOfLatestId) {
                const parentOfLatestIndex = parentEntries.findIndex(entry => entry.id === parentOfLatestId);
                if (parentOfLatestIndex !== -1) {
                  const parentOfLatest = parentEntries.splice(parentOfLatestIndex, 1)[0];
                  parentEntries.unshift(parentOfLatest);
                }
              }
              
              // Sonra en son entry'yi başa al
              const latestEntryIndex = parentEntries.findIndex(entry => entry.id === latestEntryId);
              if (latestEntryIndex !== -1) {
                const latestEntry = parentEntries.splice(latestEntryIndex, 1)[0];
                parentEntries.unshift(latestEntry);
              }
            }
            
            // İlk 20 parent entry'yi göster
            displayEntries(0, entriesPerPage);
            
            // Daha fazla yükle butonuna event listener ekle
            document.getElementById('loadMoreBtn').addEventListener('click', () => {
              displayEntries(displayedEntries, entriesPerPage);
            });
          } catch (error) {
            console.error("Initialization error:", error);
            try {
              const response = await fetch("entries.json");
              const entriesData = await response.json();
              allEntries = entriesData.records || entriesData;
              
              // Yukarıdaki sıralama ve düzenleme işlemlerini tekrarla
              allEntries.sort((a, b) => new Date(b.date) - new Date(a.date));
              
              if (allEntries.length > 0) {
                latestEntryId = allEntries[0].id;
                
                const latestEntry = allEntries.find(entry => entry.id === latestEntryId);
                if (latestEntry && latestEntry.references && latestEntry.references.length > 0) {
                  parentOfLatestId = latestEntry.references[0];
                }
              }
              
              parentEntries = allEntries.filter(entry => !entry.references || entry.references.length === 0);
              
              parentEntries.sort((a, b) => new Date(b.date) - new Date(a.date));
              
              if (latestEntryId) {
                if (parentOfLatestId) {
                  const parentOfLatestIndex = parentEntries.findIndex(entry => entry.id === parentOfLatestId);
                  if (parentOfLatestIndex !== -1) {
                    const parentOfLatest = parentEntries.splice(parentOfLatestIndex, 1)[0];
                    parentEntries.unshift(parentOfLatest);
                  }
                }
                
                const latestEntryIndex = parentEntries.findIndex(entry => entry.id === latestEntryId);
                if (latestEntryIndex !== -1) {
                  const latestEntry = parentEntries.splice(latestEntryIndex, 1)[0];
                  parentEntries.unshift(latestEntry);
                }
              }
              
              displayEntries(0, entriesPerPage);
              
              document.getElementById('loadMoreBtn').addEventListener('click', () => {
                displayEntries(displayedEntries, entriesPerPage);
              });
            } catch (fallbackError) {
              console.error("Fallback failed:", fallbackError);
              document.getElementById("entries").innerHTML = 
                '<div class="error">Veriler yüklenirken bir hata oluştu</div>';
            }
          }
        }

        // 6. UYGULAMAYI BAŞLAT
        document.addEventListener("DOMContentLoaded", initializeApp);
    </script>

    <!-- Matrix Arka Plan Script'i -->
    <script src="/JAVASCRIPT/matrix.js"></script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0WNL3VLY3F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-0WNL3VLY3F');
    </script>
</body>
</html>