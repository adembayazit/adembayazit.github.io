<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ImageKit Upload Example</title>
</head>
<body>
<h2>ImageKit Upload</h2>
<input type="file" id="fileInput">
<button id="uploadBtn">Upload</button>

<script src="https://unpkg.com/imagekit-javascript/dist/imagekit.min.js"></script>
<script>
document.getElementById('uploadBtn').addEventListener('click', async () => {
    const file = document.getElementById('fileInput').files[0];
    if (!file) return alert("Please select a file!");

    // 1️⃣ ImageKit instance
    const imagekit = new ImageKit({
        publicKey: "public_xxxxxxx",  // Netlify env’deki public key
        urlEndpoint: "https://ik.imagekit.io/your_imagekit_id",
        authenticationEndpoint: "/.netlify/functions/imagekit-auth"
    });

    try {
        const result = await imagekit.upload({
            file: file,
            fileName: file.name
        });
        console.log("Upload Success:", result);
        alert("Upload successful! URL: " + result.url);
    } catch (err) {
        console.error("Upload Error:", err);
        alert("Upload failed. Check console.");
    }
});
</script>
</body>
</html>