const fileInput = document.getElementById('fileInput');
const uploadBtn = document.getElementById('uploadBtn');

uploadBtn.addEventListener('click', async () => {
    const file = fileInput.files[0];
    if (!file) return alert("Please select a file!");

    console.log("Selected file:", file);
    console.log("File name:", file.name);

    const imagekit = new ImageKit({
        publicKey: "public_xxxxxxx",
        urlEndpoint: "https://ik.imagekit.io/your_imagekit_id",
        authenticationEndpoint: "/.netlify/functions/imagekit-auth"
    });

    try {
        const result = await imagekit.upload({
            file: file,
            fileName: file.name || "default_name.jpg"  // file.name bo≈üsa fallback
        });
        console.log("Upload success:", result);
        alert("Upload successful! URL: " + result.url);
    } catch (err) {
        console.error("Upload error:", err);
        alert("Upload failed. Check console.");
    }
});