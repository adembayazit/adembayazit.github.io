<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cybersecurity Articles Admin | Adem Bayazıt</title>
    <meta name="description" content="Makale yönetim paneli">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Cybersecurity Articles Admin" />
    <meta property="og:description" content="Makale yönetim paneli" />
    <meta property="og:type" content="website" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/IMAGES/ab.png">
    
    <!-- CSS Libraries -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.0/css/flag-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Quill Editor CSS -->
    <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #00ff00;
            --primary-dark: #00cc00;
            --primary-light: #33ff33;
            --bg-color: #0a1916;
            --card-bg: rgba(10, 25, 20, 0.95);
            --text-color: #ffffff;
            --text-muted: #cccccc;
            --border-color: #00aa00;
            --highlight-color: #99ff99;
            --sidebar-width: 280px;
            --danger-color: #ff4444;
            --warning-color: #ffcc00;
            --success-color: #00cc66;
            --sidebar-collapsed: 70px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        html {
            font-size: 16px;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            min-height: 100vh;
            width: 100%;
        }
        
        /* Login Screen */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: var(--bg-color);
            width: 100%;
        }
        
        .login-box {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 40px 30px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .login-icon {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .login-title {
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
            font-size: 0.95rem;
        }
        
        .form-control {
            width: 100%;
            padding: 14px 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 255, 0, 0.15);
        }
        
        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: #000;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.2);
        }
        
        .login-error {
            color: var(--danger-color);
            margin-top: 15px;
            font-size: 0.9rem;
            display: none;
            padding: 10px;
            background: rgba(255, 68, 68, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(255, 68, 68, 0.3);
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            min-height: 100vh;
            width: 100%;
        }
        
        /* Admin Header */
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 70px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .hamburger-btn {
            display: none;
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .hamburger-btn:hover {
            background: rgba(0, 255, 0, 0.1);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-container img {
            height: 32px;
            width: auto;
        }
        
        .logo-container h1 {
            font-size: 1.4rem;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .current-user {
            font-weight: 500;
            color: var(--highlight-color);
        }
        
        .logout-btn {
            background: rgba(255, 68, 68, 0.2);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: var(--danger-color);
            color: white;
        }
        
        /* Admin Container */
        .admin-container {
            display: flex;
            min-height: calc(100vh - 70px);
            margin-top: 70px;
            width: 100%;
        }
        
        /* Sidebar */
        .admin-sidebar {
            width: var(--sidebar-width);
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            position: fixed;
            top: 70px;
            left: 0;
            bottom: 0;
            overflow-y: auto;
            overflow-x: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            padding: 20px 0;
        }
        
        .admin-sidebar::-webkit-scrollbar {
            width: 5px;
        }
        
        .admin-sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }
        
        .admin-sidebar::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }
        
        .admin-nav {
            list-style: none;
            padding: 0;
        }
        
        .nav-section {
            margin: 20px 0 10px 25px;
            font-size: 0.8rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .nav-item {
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            text-decoration: none;
            color: var(--text-color);
        }
        
        .nav-item:hover {
            background: rgba(0, 255, 0, 0.1);
        }
        
        .nav-item.active {
            background: rgba(0, 255, 0, 0.15);
            border-left: 3px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .nav-item span {
            font-weight: 500;
            white-space: nowrap;
        }
        
        /* Main Content */
        .admin-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 25px;
            min-height: calc(100vh - 70px);
            transition: all 0.3s ease;
            width: calc(100% - var(--sidebar-width));
        }
        
        .section-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .section-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .section-title {
            font-size: 1.6rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }
        
        .section-title i {
            font-size: 1.4rem;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-color);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .icon-blue { background: rgba(0, 123, 255, 0.2); color: #007bff; }
        .icon-green { background: rgba(0, 200, 83, 0.2); color: #00c853; }
        .icon-orange { background: rgba(255, 152, 0, 0.2); color: #ff9800; }
        .icon-purple { background: rgba(156, 39, 176, 0.2); color: #9c27b0; }
        .icon-red { background: rgba(244, 67, 54, 0.2); color: #f44336; }
        .icon-teal { background: rgba(0, 150, 136, 0.2); color: #009688; }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: white;
        }
        
        .stat-label {
            color: var(--text-muted);
            font-size: 0.95rem;
        }
        
        /* Tables */
        .data-table-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            margin-top: 20px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th {
            background: rgba(0, 255, 0, 0.1);
            padding: 18px 20px;
            text-align: left;
            font-weight: 600;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            font-size: 0.95rem;
        }
        
        .data-table td {
            padding: 18px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: middle;
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        .data-table tr:hover {
            background: rgba(0, 255, 0, 0.03);
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .btn-sm {
            padding: 8px 12px;
            font-size: 0.85rem;
            border-radius: 6px;
            min-width: 40px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-success:hover {
            background: #00b359;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: #000;
        }
        
        .btn-warning:hover {
            background: #e6b800;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background: #ff2222;
            transform: translateY(-2px);
        }
        
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        
        .btn-info:hover {
            background: #138496;
            transform: translateY(-2px);
        }
        
        /* Form Container */
        .form-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            margin-top: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }
        
        .form-text {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 6px;
            display: block;
        }
        
        /* Quill Editor Customization */
        .ql-toolbar {
            background: rgba(0, 0, 0, 0.4) !important;
            border-color: var(--border-color) !important;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border-bottom: none !important;
        }
        
        .ql-container {
            border-color: var(--border-color) !important;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
            min-height: 300px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .ql-editor {
            color: var(--text-color);
            font-family: inherit;
            min-height: 300px;
            font-size: 1rem;
        }
        
        .ql-editor.ql-blank::before {
            color: var(--text-muted) !important;
            font-style: italic !important;
        }
        
        /* Image upload button styling */
        .ql-toolbar .ql-image {
            position: relative;
        }
        
        .ql-toolbar .ql-image input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        /* Tab Navigation */
        .nav-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 25px;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
        
        .nav-tabs::-webkit-scrollbar {
            height: 4px;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
            flex-shrink: 0;
        }
        
        .tab-btn:hover {
            color: var(--text-color);
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Tags Input */
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 12px;
        }
        
        .tag {
            background: rgba(0, 255, 0, 0.2);
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        .tag-remove {
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
            color: var(--danger-color);
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .tag-remove:hover {
            background: var(--danger-color);
            color: white;
        }
        
        .tag-input-container {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        
        .tag-input {
            flex: 1;
        }
        
        /* Image Upload */
        .image-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 50px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 25px;
        }
        
        .image-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(0, 255, 0, 0.05);
        }
        
        .upload-icon {
            font-size: 3.5rem;
            color: var(--border-color);
            margin-bottom: 15px;
        }
        
        .image-upload-area:hover .upload-icon {
            color: var(--primary-color);
        }
        
        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .preview-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            aspect-ratio: 16/9;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .preview-item:hover {
            transform: scale(1.05);
            border-color: var(--primary-color);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.2);
        }
        
        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .preview-remove {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--danger-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
        }
        
        .preview-remove:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(255, 68, 68, 0.3);
        }
        
        .preview-insert {
            position: absolute;
            top: 8px;
            left: 8px;
            background: var(--primary-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
        }
        
        .preview-insert:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(0, 255, 0, 0.3);
        }
        
        /* Email Preview */
        .email-preview {
            background: #f8f9fa;
            color: #333;
            padding: 25px;
            border-radius: 10px;
            margin-top: 25px;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }
        
        /* Toast Notification */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .toast {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px 20px;
            min-width: 300px;
            max-width: 400px;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .toast-success {
            border-left: 4px solid var(--success-color);
        }
        
        .toast-error {
            border-left: 4px solid var(--danger-color);
        }
        
        .toast-warning {
            border-left: 4px solid var(--warning-color);
        }
        
        .toast-info {
            border-left: 4px solid var(--primary-color);
        }
        
        .toast i {
            font-size: 1.2rem;
        }
        
        .toast-success i { color: var(--success-color); }
        .toast-error i { color: var(--danger-color); }
        .toast-warning i { color: var(--warning-color); }
        .toast-info i { color: var(--primary-color); }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalIn 0.3s ease;
        }
        
        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            color: var(--primary-color);
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.8rem;
            cursor: pointer;
            line-height: 1;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .modal-body {
            padding: 25px;
        }
        
        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(0, 255, 0, 0.3);
            border-radius: 50%;
            border-top: 3px solid var(--primary-color);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile Sidebar Overlay */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 998;
            backdrop-filter: blur(3px);
        }
        
        .sidebar-overlay.active {
            display: block;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .admin-content {
                padding: 20px;
            }
        }
        
        @media (max-width: 992px) {
            .hamburger-btn {
                display: block;
            }
            
            .admin-sidebar {
                transform: translateX(-100%);
                width: 280px;
            }
            
            .admin-sidebar.active {
                transform: translateX(0);
            }
            
            .admin-content {
                margin-left: 0;
                width: 100%;
            }
            
            .nav-section, .nav-item span {
                display: block;
            }
            
            .logo-container h1 {
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 768px) {
            html {
                font-size: 15px;
            }
            
            .admin-header {
                padding: 12px 15px;
                height: 60px;
            }
            
            .admin-container {
                margin-top: 60px;
                min-height: calc(100vh - 60px);
            }
            
            .admin-content {
                padding: 15px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .data-table-container {
                overflow-x: auto;
            }
            
            .data-table {
                min-width: 700px;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
            
            .modal-content {
                margin: 0 10px;
            }
            
            .image-preview {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .toast {
                min-width: 250px;
                max-width: calc(100vw - 40px);
            }
        }
        
        @media (max-width: 576px) {
            html {
                font-size: 14px;
            }
            
            .login-box {
                padding: 30px 20px;
            }
            
            .section-title {
                font-size: 1.4rem;
            }
            
            .stat-card {
                padding: 20px;
            }
            
            .stat-value {
                font-size: 2rem;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .nav-tabs {
                flex-wrap: nowrap;
                overflow-x: scroll;
                -webkit-overflow-scrolling: touch;
            }
            
            .tab-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .modal-body {
                padding: 20px;
            }
            
            .image-upload-area {
                padding: 40px 15px;
            }
            
            .upload-icon {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 400px) {
            .admin-header {
                flex-wrap: wrap;
                height: auto;
                min-height: 60px;
            }
            
            .header-left, .header-right {
                width: 100%;
                justify-content: space-between;
            }
            
            .admin-container {
                margin-top: 80px;
            }
            
            .logo-container h1 {
                font-size: 1.1rem;
            }
        }
        
        /* Dark mode scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        /* Utility Classes */
        .d-flex {
            display: flex;
        }
        
        .flex-column {
            flex-direction: column;
        }
        
        .align-center {
            align-items: center;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .w-100 {
            width: 100%;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-3 {
            margin-bottom: 1rem;
        }
        
        .mt-3 {
            margin-top: 1rem;
        }
        
        .p-3 {
            padding: 1rem;
        }
        
        /* Badge */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-success {
            background: rgba(0, 200, 83, 0.2);
            color: #00c853;
        }
        
        .badge-warning {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
        }
        
        .badge-danger {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }
        
        .badge-info {
            background: rgba(23, 162, 184, 0.2);
            color: #17a2b8;
        }
        
        /* Debug info */
        .debug-info {
            font-size: 0.7rem;
            color: #888;
            margin-top: 5px;
            padding: 5px;
            background: rgba(0, 30, 0, 0.2);
            border-radius: 3px;
            display: none;
        }
        
        /* Alternative upload */
        .alternative-upload {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 30, 0, 0.3);
            border: 1px dashed var(--primary-color);
            border-radius: 3px;
            font-size: 0.8rem;
        }
        
        .alternative-upload a {
            color: var(--primary-color);
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h1 class="login-title">Admin Girişi</h1>
            <p style="margin-bottom: 25px; color: var(--text-muted); font-size: 0.95rem;">Makale yönetim paneline erişmek için giriş yapın</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="adminPassword">Şifre</label>
                    <input type="password" id="adminPassword" class="form-control" placeholder="Admin şifresini girin" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Giriş Yap
                </button>
            </form>
            
            <div id="loginError" class="login-error">
                Hatalı şifre! Lütfen tekrar deneyin.
            </div>
            
            <div style="margin-top: 25px; font-size: 0.85rem; color: var(--text-muted);">
                <p><strong>Varsayılan şifre:</strong> admin</p>
                <p style="margin-top: 5px; font-size: 0.8rem;">İlk girişten sonra şifrenizi değiştirmeniz önerilir.</p>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-left">
                <button class="hamburger-btn" id="hamburgerBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo-container">
                    <img src="/IMAGES/hackerwhite.svg" alt="Logo">
                    <h1>Makale Yönetim Paneli</h1>
                </div>
            </div>
            
            <div class="header-right">
                <span class="current-user" id="currentUser">Admin</span>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Çıkış
                </button>
            </div>
        </header>

        <!-- Mobile Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Container -->
        <div class="admin-container">
            <!-- Sidebar -->
            <aside class="admin-sidebar" id="adminSidebar">
                <ul class="admin-nav">
                    <div class="nav-section">Ana Sayfa</div>
                    <li class="nav-item active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </li>
                    
                    <div class="nav-section">Makale Yönetimi</div>
                    <li class="nav-item" data-section="articles">
                        <i class="fas fa-newspaper"></i>
                        <span>Tüm Makaleler</span>
                    </li>
                    <li class="nav-item" data-section="editor">
                        <i class="fas fa-edit"></i>
                        <span>Yeni Makale</span>
                    </li>
                    
                    <div class="nav-section">Abonelik</div>
                    <li class="nav-item" data-section="subscribers">
                        <i class="fas fa-users"></i>
                        <span>Aboneler</span>
                    </li>
                    <li class="nav-item" data-section="email">
                        <i class="fas fa-envelope"></i>
                        <span>Email Gönder</span>
                    </li>
                    
                    <div class="nav-section">Ayarlar</div>
                    <li class="nav-item" data-section="settings">
                        <i class="fas fa-cog"></i>
                        <span>Ayarlar</span>
                    </li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="admin-content">
                <!-- Dashboard Section -->
                <section id="dashboard" class="section-content active">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </h2>
                        <div style="color: var(--text-muted); font-size: 0.9rem;">
                            Son güncelleme: <span id="lastUpdateTime">-</span>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon icon-blue">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div class="stat-value" id="totalArticles">0</div>
                            <div class="stat-label">Toplam Makale</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon icon-green">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-value" id="totalViews">0</div>
                            <div class="stat-label">Toplam Görüntülenme</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon icon-purple">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="stat-value" id="totalLikes">0</div>
                            <div class="stat-label">Toplam Beğeni</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon icon-orange">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value" id="totalSubscribers">0</div>
                            <div class="stat-label">Abone Sayısı</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon icon-teal">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-value" id="avgReadingTime">0</div>
                            <div class="stat-label">Ort. Okuma Süresi</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon icon-red">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="stat-value" id="lastArticleDate">-</div>
                            <div class="stat-label">Son Makale</div>
                        </div>
                    </div>

                    <!-- Recent Articles -->
                    <div class="section-header" style="margin-top: 40px;">
                        <h3 class="section-title">
                            <i class="fas fa-history"></i> Son Makaleler
                        </h3>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Başlık</th>
                                    <th>Kategori</th>
                                    <th>Tarih</th>
                                    <th>Görüntülenme</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="recentArticles">
                                <!-- Recent articles will be loaded here -->
                                <tr>
                                    <td colspan="5" class="text-center" style="padding: 40px;">
                                        <div class="spinner"></div>
                                        <p style="margin-top: 15px; color: var(--text-muted);">Makaleler yükleniyor...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Articles List Section -->
                <section id="articles" class="section-content">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-newspaper"></i> Tüm Makaleler
                        </h2>
                        <button class="btn btn-primary" id="newArticleBtn">
                            <i class="fas fa-plus"></i> Yeni Makale
                        </button>
                    </div>

                    <div class="data-table-container">
                        <table class="data-table" id="articlesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Başlık</th>
                                    <th>Kategori</th>
                                    <th>Tarih</th>
                                    <th>Görüntülenme</th>
                                    <th>Beğeni</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="articlesTableBody">
                                <!-- Articles will be loaded here -->
                                <tr>
                                    <td colspan="7" class="text-center" style="padding: 40px;">
                                        <div class="spinner"></div>
                                        <p style="margin-top: 15px; color: var(--text-muted);">Makaleler yükleniyor...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Article Editor Section -->
                <section id="editor" class="section-content">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-edit"></i> Makale Editörü
                        </h2>
                        <div class="d-flex align-center" style="gap: 10px;">
                            <button class="btn btn-primary" id="saveDraftBtn">
                                <i class="fas fa-save"></i> Taslak Kaydet
                            </button>
                            <button class="btn btn-success" id="publishArticleBtn">
                                <i class="fas fa-paper-plane"></i> Yayınla
                            </button>
                        </div>
                    </div>

                    <div class="nav-tabs">
                        <button class="tab-btn active" data-tab="content">İçerik</button>
                        <button class="tab-btn" data-tab="seo">SEO & Ayarlar</button>
                        <button class="tab-btn" data-tab="images">Görseller</button>
                        <button class="tab-btn" data-tab="preview">Önizleme</button>
                    </div>

                    <div class="form-container">
                        <!-- Content Tab -->
                        <div id="contentTab" class="tab-content active">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Makale Başlığı (EN) *</label>
                                    <input type="text" id="articleTitle" class="form-control" placeholder="Makale başlığını girin" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Makale Başlığı (TR)</label>
                                    <input type="text" id="articleTitleTR" class="form-control" placeholder="Türkçe başlık (isteğe bağlı)">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Kategori *</label>
                                    <select id="articleCategory" class="form-control" required>
                                        <option value="">Kategori seçin</option>
                                        <option value="Malware Analysis">Malware Analysis</option>
                                        <option value="Network Security">Network Security</option>
                                        <option value="Web Security">Web Security</option>
                                        <option value="Cryptography">Cryptography</option>
                                        <option value="Social Engineering">Social Engineering</option>
                                        <option value="Threat Intelligence">Threat Intelligence</option>
                                        <option value="Penetration Testing">Penetration Testing</option>
                                        <option value="Incident Response">Incident Response</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Yazar *</label>
                                    <input type="text" id="articleAuthor" class="form-control" value="Adem Bayazıt" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">İçerik (EN) *</label>
                                <div id="editorEN"></div>
                                <span class="form-text">Zengin metin editörü. Kod blokları için "Code Block" butonunu kullanın. Görsel eklemek için araç çubuğundaki "Görsel" butonuna tıklayın.</span>
                            </div>

                            <div class="form-group">
                                <label class="form-label">İçerik (TR)</label>
                                <div id="editorTR"></div>
                                <span class="form-text">Türkçe çeviri (isteğe bağlı). Görsel eklemek için araç çubuğundaki "Görsel" butonuna tıklayın.</span>
                            </div>
                        </div>

                        <!-- SEO & Settings Tab -->
                        <div id="seoTab" class="tab-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">SEO Başlık</label>
                                    <input type="text" id="seoTitle" class="form-control" placeholder="Google'da görünecek başlık (otomatik)">
                                    <span class="form-text">Boş bırakılırsa makale başlığı kullanılır</span>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">SEO Açıklama</label>
                                    <textarea id="seoDescription" class="form-control" placeholder="Meta açıklaması (max 160 karakter)" maxlength="160" rows="3"></textarea>
                                    <span class="form-text">Arama motorlarında görünecek açıklama</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Etiketler</label>
                                <div class="tags-container" id="tagsContainer">
                                    <!-- Tags will appear here -->
                                </div>
                                <div class="tag-input-container">
                                    <input type="text" id="tagInput" class="form-control tag-input" placeholder="Etiket ekle (örn: hacking, security)">
                                    <button type="button" class="btn btn-primary btn-sm" id="addTagBtn">Ekle</button>
                                </div>
                                <span class="form-text">Enter tuşu ile hızlı ekleme yapabilirsiniz</span>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Okuma Süresi (dakika)</label>
                                    <input type="number" id="readingTime" class="form-control" value="5" min="1" max="60">
                                    <span class="form-text">Makalenin ortalama okuma süresi</span>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Yayın Tarihi</label>
                                    <input type="datetime-local" id="publishDate" class="form-control">
                                    <span class="form-text">Gelecek bir tarih seçerek zamanlayabilirsiniz</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <input type="checkbox" id="featuredArticle" style="width: 18px; height: 18px;">
                                    <label for="featuredArticle" class="form-label" style="margin-bottom: 0;">Öne çıkan makale olarak işaretle</label>
                                </div>
                            </div>
                        </div>

                        <!-- Images Tab -->
                        <div id="imagesTab" class="tab-content">
                            <div class="form-group">
                                <label class="form-label">Kapak Görseli URL</label>
                                <input type="text" id="featuredImage" class="form-control" placeholder="https://ik.imagekit.io/your-imagekit-id/image.jpg">
                                <span class="form-text">Önerilen boyut: 1200x630 piksel. Aşağıdaki alandan görsel yükleyip buraya otomatik ekleyebilirsiniz.</span>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Kapak Görseli Yükle (ImageKit)</label>
                                <div class="image-upload-area" id="imageUploadArea">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <p style="font-weight: 500; margin-bottom: 5px;">Kapak görselini buraya sürükleyin veya tıklayın</p>
                                    <p class="form-text">PNG, JPG, GIF - Max 5MB</p>
                                </div>
                                <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                                
                                <div class="image-preview" id="imagePreview">
                                    <!-- Uploaded images preview will appear here -->
                                    <p style="color: var(--text-muted); text-align: center; padding: 20px; grid-column: 1 / -1;">
                                        Henüz görsel yüklenmedi
                                    </p>
                                </div>
                            </div>

                            <div class="form-group">
                                <div style="display: flex; gap: 10px; margin-top: 20px;">
                                    <button class="btn btn-primary" id="uploadImageBtn">
                                        <i class="fas fa-upload"></i> Görseli Yükle
                                    </button>
                                    <button class="btn btn-info" id="clearImageBtn">
                                        <i class="fas fa-times"></i> Temizle
                                    </button>
                                </div>
                                <span class="form-text">Yüklediğiniz görsel otomatik olarak Kapak Görseli URL alanına eklenecektir.</span>
                            </div>
                        </div>

                        <!-- Preview Tab -->
                        <div id="previewTab" class="tab-content">
                            <div class="form-group">
                                <button class="btn btn-primary" id="refreshPreview">
                                    <i class="fas fa-sync"></i> Önizlemeyi Yenile
                                </button>
                                <span class="form-text">Makale içeriğini önizlemek için yukarıdaki butonu kullanın</span>
                            </div>
                            <div id="articlePreview" class="email-preview">
                                <h3>Makale Önizleme</h3>
                                <p style="color: #666; margin-top: 10px;">Önizlemeyi yenile butonuna tıklayarak makalenin nasıl görüneceğini görebilirsiniz.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Subscribers Section -->
                <section id="subscribers" class="section-content">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-users"></i> Abone Listesi
                        </h2>
                        <div class="d-flex align-center" style="gap: 10px;">
                            <span id="subscribersCount" style="color: var(--text-muted);">0 abone</span>
                            <button class="btn btn-primary btn-sm" id="exportSubscribersBtn">
                                <i class="fas fa-download"></i> CSV İndir
                            </button>
                        </div>
                    </div>

                    <div class="form-container" style="margin-bottom: 25px;">
                        <div class="form-group">
                            <label class="form-label">Yeni Abone Ekle</label>
                            <div class="d-flex" style="gap: 10px;">
                                <input type="email" id="addSubscriberEmail" class="form-control" placeholder="email@example.com">
                                <button class="btn btn-success" id="addSubscriberBtn" style="min-width: 120px;">
                                    <i class="fas fa-plus"></i> Ekle
                                </button>
                            </div>
                            <span class="form-text">Geçerli bir email adresi girin</span>
                        </div>
                    </div>

                    <div class="data-table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Email</th>
                                    <th>Kayıt Tarihi</th>
                                    <th>Durum</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="subscribersTableBody">
                                <!-- Subscribers will be loaded here -->
                                <tr>
                                    <td colspan="5" class="text-center" style="padding: 40px;">
                                        <div class="spinner"></div>
                                        <p style="margin-top: 15px; color: var(--text-muted);">Aboneler yükleniyor...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Email Section -->
                <section id="email" class="section-content">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-envelope"></i> Email Gönderimi
                        </h2>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span id="emailStats" style="color: var(--text-muted); font-weight: 500;">0 abone</span>
                            <button class="btn btn-primary btn-sm" id="refreshEmailStats">
                                <i class="fas fa-sync"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-container">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Gönderilecek Makale</label>
                                <select id="emailArticleSelect" class="form-control">
                                    <option value="">Makale seçin</option>
                                    <!-- Articles will be loaded here -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email Başlığı</label>
                                <input type="text" id="emailSubject" class="form-control" value="Yeni Makale: {article_title}">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Şablon</label>
                                <select id="emailTemplate" class="form-control">
                                    <option value="new_article">Yeni Makale Duyurusu</option>
                                    <option value="weekly_digest">Haftalık Özet</option>
                                    <option value="important_alert">Önemli Güncelleme</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Test Email (isteğe bağlı)</label>
                                <input type="email" id="testEmail" class="form-control" placeholder="test@example.com">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Özel Mesaj (isteğe bağlı)</label>
                            <textarea id="customMessage" class="form-control" rows="4" placeholder="Abonelerinize özel bir mesaj ekleyin..."></textarea>
                        </div>

                        <div class="form-group">
                            <div class="d-flex align-center" style="gap: 12px; flex-wrap: wrap;">
                                <button class="btn btn-warning" id="testEmailBtn">
                                    <i class="fas fa-vial"></i> Test Gönderimi
                                </button>
                                <button class="btn btn-success" id="sendEmailBtn">
                                    <i class="fas fa-paper-plane"></i> Tüm Abonelere Gönder
                                </button>
                                <button class="btn btn-info" id="previewEmailBtn">
                                    <i class="fas fa-eye"></i> Önizleme
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-container" style="margin-top: 25px;">
                        <h3 style="margin-bottom: 15px; color: var(--primary-color);">
                            <i class="fas fa-eye"></i> Email Önizleme
                        </h3>
                        <div id="emailPreviewContent" class="email-preview">
                            <p style="color: #666;">Bir makale seçerek email önizlemesini görebilirsiniz.</p>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings" class="section-content">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-cog"></i> Ayarlar
                        </h2>
                    </div>

                    <div class="form-container">
                        <div class="nav-tabs">
                            <button class="tab-btn active" data-tab="general">Genel</button>
                            <button class="tab-btn" data-tab="security">Güvenlik</button>
                            <button class="tab-btn" data-tab="backup">Yedekleme</button>
                        </div>

                        <!-- General Settings -->
                        <div id="generalTab" class="tab-content active">
                            <div class="form-group">
                                <label class="form-label">Site Başlığı</label>
                                <input type="text" id="siteTitle" class="form-control" value="Cybersecurity Articles">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Site Açıklaması</label>
                                <textarea id="siteDescription" class="form-control" rows="3">Cybersecurity articles, research and analysis by Adem Bayazıt</textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Yönetici Email</label>
                                <input type="email" id="adminEmail" class="form-control" value="fyi@adembayazit.com">
                            </div>
                            
                            <button class="btn btn-primary" id="saveGeneralSettings" style="margin-top: 20px;">
                                <i class="fas fa-save"></i> Genel Ayarları Kaydet
                            </button>
                        </div>

                        <!-- Security Settings -->
                        <div id="securityTab" class="tab-content">
                            <div class="form-group">
                                <label class="form-label">Yeni Şifre</label>
                                <input type="password" id="newPassword" class="form-control" placeholder="En az 6 karakter">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Şifre Tekrar</label>
                                <input type="password" id="confirmPassword" class="form-control" placeholder="Şifreyi tekrar girin">
                            </div>
                            
                            <div class="form-group">
                                <div style="display: flex; align-items: center; gap: 10px; margin-top: 20px;">
                                    <input type="checkbox" id="require2FA" style="width: 18px; height: 18px;">
                                    <label for="require2FA" class="form-label" style="margin-bottom: 0;">İki faktörlü kimlik doğrulama gerektir</label>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" id="saveSecuritySettings" style="margin-top: 20px;">
                                <i class="fas fa-save"></i> Güvenlik Ayarlarını Kaydet
                            </button>
                        </div>

                        <!-- Backup Settings -->
                        <div id="backupTab" class="tab-content">
                            <div class="form-group">
                                <label class="form-label">Son Yedekleme</label>
                                <input type="text" id="lastBackup" class="form-control" readonly value="Hiç yedekleme yapılmadı">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Otomatik Yedekleme</label>
                                <select id="backupFrequency" class="form-control">
                                    <option value="daily">Günlük</option>
                                    <option value="weekly" selected>Haftalık</option>
                                    <option value="monthly">Aylık</option>
                                    <option value="never">Hiçbir zaman</option>
                                </select>
                            </div>
                            
                            <div class="d-flex align-center" style="gap: 12px; margin-top: 25px; flex-wrap: wrap;">
                                <button class="btn btn-primary" id="createBackupBtn">
                                    <i class="fas fa-download"></i> Yedek Oluştur
                                </button>
                                <button class="btn btn-info" id="exportDataBtn">
                                    <i class="fas fa-file-export"></i> JSON İndir
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal for Article Preview -->
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Makale Önizleme</h3>
                <button class="modal-close" id="closePreview">&times;</button>
            </div>
            <div class="modal-body" id="previewModalContent">
                <!-- Preview content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal for Confirmations -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="confirmTitle">Onay</h3>
                <button class="modal-close" id="closeConfirm">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Bu işlemi gerçekleştirmek istediğinizden emin misiniz?</p>
                <div class="d-flex align-center" style="gap: 12px; margin-top: 25px;">
                    <button class="btn btn-primary" id="cancelConfirm" style="flex: 1;">İptal</button>
                    <button class="btn btn-danger" id="confirmAction" style="flex: 1;">Onayla</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Quill Editor -->
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    
    <!-- Chart.js for Statistics (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // Configuration
        const CONFIG = {
            ARTICLES_BIN_ID: '695f155c43b1c97be920c28d',
            SUBSCRIBERS_BIN_ID: '68d7fc3bae596e708ffdcc6e',
            ADMIN_PASSWORD_HASH: 'be408a40a5c6c0df48e0004b217dec97519da5e73876598203ec53bbe3ece5f7', // SHA256 of "admin"
            SESSION_TIMEOUT: 60 * 60 * 1000,
            DRAFT_AUTOSAVE_INTERVAL: 30000,
            IMAGEKIT_AUTH_ENDPOINT: 'https://adembayazit.netlify.app/.netlify/functions/imagekit-auth'
        };

        // Global Variables
        let articlesData = [];
        let subscribersData = [];
        let currentArticleId = null;
        let isEditing = false;
        let quillEN = null;
        let quillTR = null;
        let sessionTimer = null;
        let autoSaveTimer = null;
        let currentArticleTags = [];
        let uploadedImages = []; // Store uploaded ImageKit URLs for featured images
        let selectedFile = null; // Single file for featured image
        let isSidebarOpen = false;

        // SHA-256 Hash Function
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        // Toast Notification System
        function showToast(message, type = 'info', duration = 5000) {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            let icon = 'info-circle';
            if (type === 'success') icon = 'check-circle';
            if (type === 'error') icon = 'exclamation-circle';
            if (type === 'warning') icon = 'exclamation-triangle';
            
            toast.innerHTML = `
                <i class="fas fa-${icon}"></i>
                <span>${message}</span>
            `;
            toastContainer.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toastContainer.removeChild(toast), 300);
            }, duration);
        }

        // Modal Functions
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Confirm Dialog
        function showConfirm(message, callback) {
            document.getElementById('confirmMessage').textContent = message;
            showModal('confirmModal');
            
            document.getElementById('confirmAction').onclick = () => {
                hideModal('confirmModal');
                callback();
            };
            
            document.getElementById('cancelConfirm').onclick = () => hideModal('confirmModal');
            document.getElementById('closeConfirm').onclick = () => hideModal('confirmModal');
        }

        // Sidebar Management
        function toggleSidebar() {
            const sidebar = document.getElementById('adminSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            isSidebarOpen = !isSidebarOpen;
            
            if (isSidebarOpen) {
                sidebar.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            } else {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        function closeSidebar() {
            const sidebar = document.getElementById('adminSidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            isSidebarOpen = false;
        }

        // Proxy Helper Function
        async function fetchViaProxy(path, method = 'GET', body = null, binId = null) {
            const proxyUrl = 'https://adembayazit.netlify.app/.netlify/functions/jsonbin-proxy';
            
            try {
                const response = await fetch(proxyUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        path: binId ? `/b/${binId}${path}` : path,
                        method, 
                        body,
                        binId: binId
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('Proxy error response:', errorText);
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                // Debug için
                console.log(`Proxy ${method} ${binId}${path}:`, result);
                
                return result;
            } catch (error) {
                console.error('Proxy fetch error:', error);
                showToast('API bağlantı hatası', 'error');
                throw error;
            }
        }

        // Authentication Functions
        function checkAuth() {
            const auth = sessionStorage.getItem('adminAuth');
            const authTime = sessionStorage.getItem('adminAuthTime');
            
            if (auth && authTime) {
                const currentTime = new Date().getTime();
                if (currentTime - parseInt(authTime) < CONFIG.SESSION_TIMEOUT) {
                    return true;
                }
            }
            
            return false;
        }

        function setAuth() {
            sessionStorage.setItem('adminAuth', 'true');
            sessionStorage.setItem('adminAuthTime', new Date().getTime().toString());
            startSessionTimer();
        }

        function clearAuth() {
            sessionStorage.removeItem('adminAuth');
            sessionStorage.removeItem('adminAuthTime');
            if (sessionTimer) clearTimeout(sessionTimer);
        }

        function startSessionTimer() {
            if (sessionTimer) clearTimeout(sessionTimer);
            sessionTimer = setTimeout(() => {
                showToast('Oturum süreniz doldu. Lütfen tekrar giriş yapın.', 'warning');
                logout();
            }, CONFIG.SESSION_TIMEOUT);
        }

        async function handleLogin(event) {
            event.preventDefault();
            const password = document.getElementById('adminPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            if (!password) {
                errorDiv.textContent = 'Lütfen şifre girin';
                errorDiv.style.display = 'block';
                return;
            }
            
            const hash = await sha256(password);
            
            if (hash === CONFIG.ADMIN_PASSWORD_HASH) {
                setAuth();
                showAdminPanel();
                showToast('Başarıyla giriş yapıldı', 'success');
            } else {
                errorDiv.textContent = 'Hatalı şifre!';
                errorDiv.style.display = 'block';
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').focus();
            }
        }

        function logout() {
            clearAuth();
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminPassword').value = '';
            document.getElementById('loginError').style.display = 'none';
            closeSidebar();
        }

        // Navigation Functions
        function setupNavigation() {
            // Sidebar navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    
                    // Update active states
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected section
                    document.querySelectorAll('.section-content').forEach(content => content.classList.remove('active'));
                    document.getElementById(section).classList.add('active');
                    
                    // Close sidebar on mobile
                    if (window.innerWidth <= 992) {
                        closeSidebar();
                    }
                    
                    // Load section data if needed
                    switch(section) {
                        case 'dashboard':
                            loadDashboard();
                            break;
                        case 'articles':
                            loadArticlesList();
                            break;
                        case 'subscribers':
                            loadSubscribers();
                            break;
                        case 'email':
                            loadEmailSection();
                            break;
                    }
                });
            });
            
            // Tab navigation
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Update active tabs
                    document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected tab content
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    document.getElementById(tabId + 'Tab').classList.add('active');
                });
            });
            
            // New article button
            document.getElementById('newArticleBtn')?.addEventListener('click', function() {
                resetEditor();
                switchToSection('editor');
            });
            
            // Hamburger button
            document.getElementById('hamburgerBtn')?.addEventListener('click', toggleSidebar);
            document.getElementById('sidebarOverlay')?.addEventListener('click', closeSidebar);
        }

        function switchToSection(sectionId) {
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
                if (nav.dataset.section === sectionId) {
                    nav.classList.add('active');
                }
            });
            document.querySelectorAll('.section-content').forEach(content => content.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            if (window.innerWidth <= 992) {
                closeSidebar();
            }
        }

        // Image Upload to ImageKit for Editor
        async function uploadImageToImageKitAndInsert(file, editor) {
            try {
                showToast('Görsel yükleniyor...', 'info');
                
                // Önce authentication parametrelerini al
                const authResponse = await fetch(CONFIG.IMAGEKIT_AUTH_ENDPOINT);
                
                if (!authResponse.ok) {
                    throw new Error(`Auth endpoint error: ${authResponse.status}`);
                }
                
                const authData = await authResponse.json();
                
                // FormData oluştur
                const formData = new FormData();
                formData.append('file', file);
                formData.append('fileName', file.name);
                formData.append('signature', authData.signature);
                formData.append('token', authData.token);
                formData.append('expire', authData.expire);
                formData.append('publicKey', authData.publicKey);
                
                // ImageKit'e yükle
                const uploadResponse = await fetch('https://upload.imagekit.io/api/v1/files/upload', {
                    method: 'POST',
                    body: formData
                });
                
                if (!uploadResponse.ok) {
                    const errorText = await uploadResponse.text();
                    throw new Error(`Upload error: ${uploadResponse.status} - ${errorText}`);
                }
                
                const uploadData = await uploadResponse.json();
                
                // Editöre ekle
                const range = editor.getSelection();
                if (range) {
                    editor.insertEmbed(range.index, 'image', uploadData.url);
                } else {
                    // Eğer imleç yoksa, en sona ekle
                    editor.insertEmbed(editor.getLength(), 'image', uploadData.url);
                }
                
                showToast('Görsel başarıyla yüklendi ve editöre eklendi', 'success');
                return uploadData.url;
                
            } catch (error) {
                console.error('Error uploading image:', error);
                showToast(`Görsel yüklenirken hata: ${error.message}`, 'error');
                return null;
            }
        }

        // Image Upload to ImageKit for Featured Image
        async function uploadImageToImageKitForFeaturedImage(file) {
            try {
                showToast('Kapak görseli yükleniyor...', 'info');
                
                // Önce authentication parametrelerini al
                const authResponse = await fetch(CONFIG.IMAGEKIT_AUTH_ENDPOINT);
                
                if (!authResponse.ok) {
                    throw new Error(`Auth endpoint error: ${authResponse.status}`);
                }
                
                const authData = await authResponse.json();
                
                // FormData oluştur
                const formData = new FormData();
                formData.append('file', file);
                formData.append('fileName', file.name);
                formData.append('signature', authData.signature);
                formData.append('token', authData.token);
                formData.append('expire', authData.expire);
                formData.append('publicKey', authData.publicKey);
                
                // ImageKit'e yükle
                const uploadResponse = await fetch('https://upload.imagekit.io/api/v1/files/upload', {
                    method: 'POST',
                    body: formData
                });
                
                if (!uploadResponse.ok) {
                    const errorText = await uploadResponse.text();
                    throw new Error(`Upload error: ${uploadResponse.status} - ${errorText}`);
                }
                
                const uploadData = await uploadResponse.json();
                
                // Kapak görseli URL'sini güncelle
                document.getElementById('featuredImage').value = uploadData.url;
                uploadedImages.push(uploadData.url);
                updateImagePreview();
                
                showToast('Kapak görseli başarıyla yüklendi', 'success');
                return uploadData.url;
                
            } catch (error) {
                console.error('Error uploading featured image:', error);
                showToast(`Kapak görseli yüklenirken hata: ${error.message}`, 'error');
                return null;
            }
        }

        // Setup Image Upload for Featured Image
        function setupFeaturedImageUpload() {
            const uploadArea = document.getElementById('imageUploadArea');
            const fileInput = document.getElementById('imageUpload');
            
            // Tıklama ile dosya seç
            uploadArea.addEventListener('click', (e) => {
                if (e.target !== uploadArea && !uploadArea.contains(e.target)) return;
                fileInput.click();
            });
            
            // Drag and drop
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--primary-color)';
                uploadArea.style.background = 'rgba(0, 255, 0, 0.05)';
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = 'var(--border-color)';
                uploadArea.style.background = '';
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--border-color)';
                uploadArea.style.background = '';
                
                if (e.dataTransfer.files.length) {
                    handleFileSelection(e.dataTransfer.files[0]);
                }
            });
            
            // File input change
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFileSelection(e.target.files[0]);
                }
            });
            
            // Upload image button
            document.getElementById('uploadImageBtn').addEventListener('click', uploadFeaturedImage);
            
            // Clear image button
            document.getElementById('clearImageBtn').addEventListener('click', clearSelectedImage);
        }

        function handleFileSelection(file) {
            if (!file.type.startsWith('image/')) {
                showToast('Lütfen bir resim dosyası seçin', 'error');
                return;
            }

            if (file.size > 5 * 1024 * 1024) {
                showToast('Resim dosyası çok büyük (max 5MB)', 'error');
                return;
            }

            // Create preview
            const reader = new FileReader();
            reader.onload = (e) => {
                selectedFile = {
                    file: file,
                    preview: e.target.result,
                    id: Date.now() + Math.random()
                };
                updateImagePreview();
                showToast(`${file.name} seçildi`, 'info');
            };
            reader.readAsDataURL(file);
        }

        function updateImagePreview() {
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '';
            
            if (!selectedFile && uploadedImages.length === 0) {
                preview.innerHTML = `
                    <p style="color: var(--text-muted); text-align: center; padding: 20px; grid-column: 1 / -1;">
                        Henüz görsel yüklenmedi
                    </p>
                `;
                return;
            }
            
            // Seçili dosyayı göster
            if (selectedFile) {
                const itemDiv = createPreviewItem(selectedFile, false);
                preview.appendChild(itemDiv);
            }
            
            // Daha önce yüklenen görselleri göster
            uploadedImages.forEach((url, index) => {
                const item = {
                    preview: url,
                    id: 'uploaded_' + index,
                    isUploaded: true
                };
                const itemDiv = createPreviewItem(item, true);
                preview.appendChild(itemDiv);
            });
        }

        function createPreviewItem(item, isUploaded) {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'preview-item';
            
            const img = document.createElement('img');
            img.src = item.preview;
            img.alt = `Preview`;
            
            const removeBtn = document.createElement('div');
            removeBtn.className = 'preview-remove';
            removeBtn.innerHTML = '&times;';
            removeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                
                if (isUploaded) {
                    // Remove from uploaded images
                    const urlIndex = uploadedImages.indexOf(item.preview);
                    if (urlIndex > -1) {
                        uploadedImages.splice(urlIndex, 1);
                    }
                    
                    // Eğer kapak görseli bu ise, URL alanını temizle
                    if (document.getElementById('featuredImage').value === item.preview) {
                        document.getElementById('featuredImage').value = '';
                    }
                } else {
                    // Remove selected file
                    selectedFile = null;
                }
                updateImagePreview();
                showToast('Görsel kaldırıldı', 'info');
            });

            itemDiv.appendChild(img);
            itemDiv.appendChild(removeBtn);

            // Görsele tıklayınca kapak görseli olarak ayarla
            itemDiv.addEventListener('click', (e) => {
                if (e.target !== removeBtn && !removeBtn.contains(e.target)) {
                    document.getElementById('featuredImage').value = item.preview;
                    showToast('Kapak görseli olarak seçildi', 'info');
                }
            });

            return itemDiv;
        }

        async function uploadFeaturedImage() {
            if (!selectedFile) {
                showToast('Yüklenecek görsel bulunamadı', 'warning');
                return;
            }

            const uploadBtn = document.getElementById('uploadImageBtn');
            const originalText = uploadBtn.innerHTML;
            uploadBtn.disabled = true;
            uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Yükleniyor...';

            try {
                await uploadImageToImageKitForFeaturedImage(selectedFile.file);
                selectedFile = null;
            } catch (error) {
                console.error('Error uploading featured image:', error);
            }

            uploadBtn.disabled = false;
            uploadBtn.innerHTML = originalText;
        }

        function clearSelectedImage() {
            if (selectedFile || uploadedImages.length > 0) {
                showConfirm('Tüm seçili görselleri temizlemek istediğinizden emin misiniz?', function() {
                    selectedFile = null;
                    uploadedImages = [];
                    document.getElementById('featuredImage').value = '';
                    updateImagePreview();
                    showToast('Görseller temizlendi', 'info');
                });
            } else {
                showToast('Temizlenecek görsel yok', 'info');
            }
        }

        // Data Loading Functions
        async function loadArticles() {
            try {
                console.log('Loading articles from Bin:', CONFIG.ARTICLES_BIN_ID);
                const result = await fetchViaProxy('/latest', 'GET', null, CONFIG.ARTICLES_BIN_ID);
                console.log('Raw articles result:', result);
                
                // Farklı JSON formatlarını destekle
                if (Array.isArray(result)) {
                    articlesData = result;
                } else if (result && result.articles && Array.isArray(result.articles)) {
                    articlesData = result.articles;
                } else if (result && result.records && Array.isArray(result.records)) {
                    articlesData = result.records;
                } else if (result && result.data && Array.isArray(result.data)) {
                    articlesData = result.data;
                } else {
                    console.warn('Unexpected data format, initializing empty array');
                    articlesData = [];
                }
                
                console.log('Parsed articlesData:', articlesData);
                
                // Sort by date (newest first)
                articlesData.sort((a, b) => {
                    const dateA = new Date(a.published_date || a.date || 0);
                    const dateB = new Date(b.published_date || b.date || 0);
                    return dateB - dateA;
                });
                
                return true;
            } catch (error) {
                console.error('Error loading articles:', error);
                showToast('Makaleler yüklenirken hata oluştu. Daha sonra tekrar deneyin.', 'error');
                articlesData = [];
                return false;
            }
        }

        // Subscribers Loading Function - DÜZELTİLDİ
        async function loadSubscribers() {
            try {
                console.log('Loading subscribers from Bin:', CONFIG.SUBSCRIBERS_BIN_ID);
                const result = await fetchViaProxy('/latest', 'GET', null, CONFIG.SUBSCRIBERS_BIN_ID);
                console.log('Raw subscribers result:', result);
                
                let loadedData = [];
                
                // Farklı JSON formatlarını destekle
                if (Array.isArray(result)) {
                    // Eski format: sadece email string'leri
                    // Yeni format: nesneler
                    loadedData = result.map(item => {
                        if (typeof item === 'string') {
                            return { 
                                email: item, 
                                subscribedAt: new Date().toISOString(),
                                status: 'active' 
                            };
                        }
                        return item;
                    });
                } else if (result && result.subscribers && Array.isArray(result.subscribers)) {
                    loadedData = result.subscribers.map(item => {
                        if (typeof item === 'string') {
                            return { 
                                email: item, 
                                subscribedAt: new Date().toISOString(),
                                status: 'active' 
                            };
                        }
                        return item;
                    });
                } else if (result && result.emails && Array.isArray(result.emails)) {
                    loadedData = result.emails.map(item => ({
                        email: item,
                        subscribedAt: new Date().toISOString(),
                        status: 'active'
                    }));
                } else if (result && result.data && Array.isArray(result.data)) {
                    loadedData = result.data;
                }
                
                subscribersData = loadedData;
                console.log('Parsed subscribersData:', subscribersData);
                
                // Update UI
                document.getElementById('emailStats').textContent = `${subscribersData.length} abone`;
                document.getElementById('subscribersCount').textContent = `${subscribersData.length} abone`;
                document.getElementById('totalSubscribers').textContent = subscribersData.length;
                
                // Render subscribers table
                renderSubscribersTable();
                
                return true;
            } catch (error) {
                console.error('Error loading subscribers:', error);
                showToast('Aboneler yüklenirken hata oluştu. Daha sonra tekrar deneyin.', 'error');
                subscribersData = [];
                return false;
            }
        }

        function renderSubscribersTable() {
            const tbody = document.getElementById('subscribersTableBody');
            tbody.innerHTML = '';
            
            if (subscribersData.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center" style="padding: 40px; color: var(--text-muted);">
                            Henüz abone bulunmuyor
                        </td>
                    </tr>
                `;
                return;
            }
            
            subscribersData.forEach((subscriber, index) => {
                const row = document.createElement('tr');
                const date = subscriber.subscribedAt 
                    ? new Date(subscriber.subscribedAt).toLocaleDateString('tr-TR')
                    : new Date().toLocaleDateString('tr-TR');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${subscriber.email}</td>
                    <td>${date}</td>
                    <td><span class="badge badge-success">${subscriber.status || 'Aktif'}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-danger btn-sm" onclick="removeSubscriber('${subscriber.email}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        async function removeSubscriber(email) {
            showConfirm(`${email} adresini abonelikten çıkarmak istediğinizden emin misiniz?`, async function() {
                try {
                    // Filter out the subscriber
                    subscribersData = subscribersData.filter(s => s.email !== email);
                    
                    // Save to JSON Bin
                    const dataToSave = {
                        subscribers: subscribersData,
                        lastUpdated: new Date().toISOString()
                    };
                    
                    await fetchViaProxy('', 'PUT', dataToSave, CONFIG.SUBSCRIBERS_BIN_ID);
                    
                    showToast('Abone kaldırıldı', 'success');
                    loadSubscribers();
                } catch (error) {
                    console.error('Error removing subscriber:', error);
                    showToast('Abone kaldırılırken hata oluştu', 'error');
                }
            });
        }

        // Dashboard Functions
        async function loadDashboard() {
            await Promise.all([loadArticles(), loadSubscribers()]);
            
            // Update stats
            const totalArticles = articlesData.length;
            const totalViews = articlesData.reduce((sum, article) => sum + (article.views || 0), 0);
            const totalLikes = articlesData.reduce((sum, article) => sum + (article.likes || 0), 0);
            const totalSubscribers = subscribersData.length;
            const avgReadingTime = articlesData.length > 0 
                ? Math.round(articlesData.reduce((sum, article) => sum + (article.reading_time || 5), 0) / articlesData.length)
                : 0;
            const lastArticleDate = articlesData.length > 0 
                ? new Date(articlesData[0].published_date || articlesData[0].date).toLocaleDateString('tr-TR')
                : '-';
            
            document.getElementById('totalArticles').textContent = totalArticles;
            document.getElementById('totalViews').textContent = totalViews.toLocaleString();
            document.getElementById('totalLikes').textContent = totalLikes.toLocaleString();
            document.getElementById('totalSubscribers').textContent = totalSubscribers.toLocaleString();
            document.getElementById('avgReadingTime').textContent = avgReadingTime;
            document.getElementById('lastArticleDate').textContent = lastArticleDate;
            document.getElementById('lastUpdateTime').textContent = new Date().toLocaleTimeString('tr-TR');
            
            // Load recent articles
            loadRecentArticles();
        }

        function loadRecentArticles() {
            const tbody = document.getElementById('recentArticles');
            const recentArticles = articlesData.slice(0, 5);
            
            tbody.innerHTML = '';
            
            if (recentArticles.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center" style="padding: 40px; color: var(--text-muted);">
                            Henüz makale bulunmuyor
                        </td>
                    </tr>
                `;
                return;
            }
            
            recentArticles.forEach(article => {
                const date = new Date(article.published_date || article.date).toLocaleDateString('tr-TR');
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                        ${article.title}
                    </td>
                    <td>${article.category || '-'}</td>
                    <td>${date}</td>
                    <td>${article.views || 0}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-info btn-sm" onclick="editArticle(${article.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="previewArticle(${article.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Articles List Functions
        async function loadArticlesList() {
            await loadArticles();
            
            const tbody = document.getElementById('articlesTableBody');
            tbody.innerHTML = '';
            
            if (articlesData.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center" style="padding: 40px; color: var(--text-muted);">
                            Henüz makale bulunmuyor
                        </td>
                    </tr>
                `;
                return;
            }
            
            articlesData.forEach(article => {
                const row = document.createElement('tr');
                const date = new Date(article.published_date || article.date).toLocaleDateString('tr-TR');
                
                row.innerHTML = `
                    <td>${article.id}</td>
                    <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                        ${article.title}
                    </td>
                    <td>${article.category || '-'}</td>
                    <td>${date}</td>
                    <td>${article.views || 0}</td>
                    <td>${article.likes || 0}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-info btn-sm" onclick="editArticle(${article.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="previewArticle(${article.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteArticle(${article.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            updateEmailArticleSelect();
        }

        // Article Editor Functions
        function initEditor() {
            // Custom image handler for Quill
            const ImageHandler = {
                // Create a hidden file input
                createFileInput: function(editor) {
                    const fileInput = document.createElement('input');
                    fileInput.setAttribute('type', 'file');
                    fileInput.setAttribute('accept', 'image/*');
                    fileInput.style.display = 'none';
                    
                    fileInput.addEventListener('change', async function() {
                        if (this.files && this.files[0]) {
                            const file = this.files[0];
                            
                            // Validate file type
                            if (!file.type.startsWith('image/')) {
                                showToast('Lütfen bir resim dosyası seçin', 'error');
                                return;
                            }
                            
                            // Validate file size (5MB)
                            if (file.size > 5 * 1024 * 1024) {
                                showToast('Resim dosyası çok büyük (max 5MB)', 'error');
                                return;
                            }
                            
                            // Upload to ImageKit and insert into editor
                            await uploadImageToImageKitAndInsert(file, editor);
                            
                            // Reset file input
                            fileInput.value = '';
                        }
                    });
                    
                    document.body.appendChild(fileInput);
                    return fileInput;
                }
            };

            // Initialize Quill editors with custom image handler
            const toolbarOptions = [
                [{ 'header': [1, 2, 3, false] }],
                ['bold', 'italic', 'underline', 'strike'],
                [{ 'color': [] }, { 'background': [] }],
                [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                ['link', 'image', 'code-block'],
                ['clean']
            ];

            // İngilizce editörü oluştur
            quillEN = new Quill('#editorEN', {
                theme: 'snow',
                modules: {
                    toolbar: {
                        container: toolbarOptions,
                        handlers: {
                            'image': function() {
                                // Create file input for this editor
                                const fileInput = ImageHandler.createFileInput(quillEN);
                                fileInput.click();
                            }
                        }
                    }
                },
                placeholder: 'İngilizce içeriği buraya yazın...'
            });

            // Türkçe editörü oluştur
            quillTR = new Quill('#editorTR', {
                theme: 'snow',
                modules: {
                    toolbar: {
                        container: toolbarOptions,
                        handlers: {
                            'image': function() {
                                // Create file input for this editor
                                const fileInput = ImageHandler.createFileInput(quillTR);
                                fileInput.click();
                            }
                        }
                    }
                },
                placeholder: 'Türkçe içeriği buraya yazın (isteğe bağlı)...'
            });
            
            // Set default publish date to now
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.getElementById('publishDate').value = localDateTime;
            
            // Setup tag system
            setupTagSystem();
            
            // Setup featured image upload
            setupFeaturedImageUpload();
            
            // Setup autosave
            setupAutoSave();
        }

        function setupTagSystem() {
            document.getElementById('addTagBtn').addEventListener('click', addTag);
            document.getElementById('tagInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addTag();
                }
            });
        }

        function addTag() {
            const tagInput = document.getElementById('tagInput');
            const tag = tagInput.value.trim();
            
            if (tag && !currentArticleTags.includes(tag)) {
                currentArticleTags.push(tag);
                renderTags();
                tagInput.value = '';
                tagInput.focus();
            }
        }

        function removeTag(index) {
            currentArticleTags.splice(index, 1);
            renderTags();
        }

        function renderTags() {
            const container = document.getElementById('tagsContainer');
            container.innerHTML = '';
            
            currentArticleTags.forEach((tag, index) => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag';
                tagElement.innerHTML = `
                    ${tag}
                    <span class="tag-remove" onclick="removeTag(${index})">&times;</span>
                `;
                container.appendChild(tagElement);
            });
        }

        function setupAutoSave() {
            if (autoSaveTimer) clearInterval(autoSaveTimer);
            autoSaveTimer = setInterval(saveDraft, CONFIG.DRAFT_AUTOSAVE_INTERVAL);
            window.addEventListener('beforeunload', saveDraft);
        }

        function saveDraft() {
            const articleData = getArticleFormData();
            
            if (articleData.title || articleData.content) {
                localStorage.setItem('articleDraft', JSON.stringify({
                    ...articleData,
                    tags: currentArticleTags,
                    uploadedImages: uploadedImages,
                    savedAt: new Date().toISOString()
                }));
                
                const saveBtn = document.getElementById('saveDraftBtn');
                const originalText = saveBtn.innerHTML;
                saveBtn.innerHTML = '<i class="fas fa-check"></i> Kaydedildi';
                saveBtn.style.background = 'var(--success-color)';
                
                setTimeout(() => {
                    saveBtn.innerHTML = originalText;
                    saveBtn.style.background = '';
                }, 2000);
            }
        }

        function loadDraft() {
            const draft = localStorage.getItem('articleDraft');
            if (draft) {
                try {
                    const draftData = JSON.parse(draft);
                    
                    if (draftData.title || draftData.content) {
                        if (confirm('Kaydedilmemiş bir taslak bulundu. Yüklemek ister misiniz?')) {
                            document.getElementById('articleTitle').value = draftData.title || '';
                            document.getElementById('articleTitleTR').value = draftData.title_tr || '';
                            document.getElementById('articleCategory').value = draftData.category || '';
                            document.getElementById('articleAuthor').value = draftData.author || 'Adem Bayazıt';
                            document.getElementById('featuredImage').value = draftData.featured_image || '';
                            document.getElementById('seoTitle').value = draftData.seo_title || '';
                            document.getElementById('seoDescription').value = draftData.seo_description || '';
                            document.getElementById('readingTime').value = draftData.reading_time || 5;
                            document.getElementById('publishDate').value = draftData.publish_date || '';
                            document.getElementById('featuredArticle').checked = draftData.featured || false;
                            
                            if (quillEN && draftData.content) quillEN.root.innerHTML = draftData.content;
                            if (quillTR && draftData.content_tr) quillTR.root.innerHTML = draftData.content_tr;
                            
                            currentArticleTags = draftData.tags || [];
                            uploadedImages = draftData.uploadedImages || [];
                            
                            renderTags();
                            updateImagePreview();
                            
                            showToast(`Taslak yüklendi (${new Date(draftData.savedAt).toLocaleTimeString('tr-TR')})`, 'info');
                        }
                    }
                } catch (error) {
                    console.error('Error loading draft:', error);
                    localStorage.removeItem('articleDraft');
                }
            }
        }

        function resetEditor() {
            currentArticleId = null;
            isEditing = false;
            currentArticleTags = [];
            uploadedImages = [];
            selectedFile = null;
            
            // Reset form
            document.getElementById('articleTitle').value = '';
            document.getElementById('articleTitleTR').value = '';
            document.getElementById('articleCategory').value = '';
            document.getElementById('articleAuthor').value = 'Adem Bayazıt';
            document.getElementById('featuredImage').value = '';
            document.getElementById('seoTitle').value = '';
            document.getElementById('seoDescription').value = '';
            document.getElementById('readingTime').value = 5;
            document.getElementById('publishDate').value = new Date().toISOString().slice(0, 16);
            document.getElementById('featuredArticle').checked = false;
            
            // Reset editors
            if (quillEN) quillEN.root.innerHTML = '';
            if (quillTR) quillTR.root.innerHTML = '';
            
            // Reset tags and images
            renderTags();
            updateImagePreview();
            
            // Update UI
            document.querySelector('#editor .section-title').innerHTML = '<i class="fas fa-edit"></i> Yeni Makale';
        }

        function getArticleFormData() {
            return {
                id: currentArticleId || (articlesData.length > 0 ? Math.max(...articlesData.map(a => parseInt(a.id) || 0)) + 1 : 1),
                title: document.getElementById('articleTitle').value.trim(),
                title_tr: document.getElementById('articleTitleTR').value.trim() || null,
                content: quillEN?.root.innerHTML || '',
                content_tr: quillTR?.root.innerHTML || null,
                category: document.getElementById('articleCategory').value,
                author: document.getElementById('articleAuthor').value.trim(),
                featured_image: document.getElementById('featuredImage').value.trim() || null,
                seo_title: document.getElementById('seoTitle').value.trim() || null,
                seo_description: document.getElementById('seoDescription').value.trim() || null,
                tags: currentArticleTags,
                reading_time: parseInt(document.getElementById('readingTime').value) || 5,
                published_date: document.getElementById('publishDate').value || new Date().toISOString(),
                featured: document.getElementById('featuredArticle').checked,
                views: 0,
                likes: 0,
                comments_count: 0
            };
        }

        // Save Article Function
        async function saveArticle(publish = false) {
            const articleData = getArticleFormData();
            
            // Validate required fields
            if (!articleData.title) {
                showToast('Makale başlığı gereklidir', 'error');
                document.getElementById('articleTitle').focus();
                return false;
            }
            
            if (!articleData.content) {
                showToast('Makale içeriği gereklidir', 'error');
                return false;
            }
            
            if (!articleData.category) {
                showToast('Kategori gereklidir', 'error');
                document.getElementById('articleCategory').focus();
                return false;
            }
            
            try {
                // Mevcut verileri yükle
                await loadArticles();
                
                let updatedArticles;
                if (isEditing && currentArticleId) {
                    // Update existing article
                    const index = articlesData.findIndex(a => a.id == currentArticleId);
                    if (index !== -1) {
                        articlesData[index] = { ...articlesData[index], ...articleData };
                        console.log('Updated article:', articlesData[index]);
                    }
                    updatedArticles = articlesData;
                } else {
                    // Add new article
                    console.log('Adding new article:', articleData);
                    articlesData.unshift(articleData);
                    updatedArticles = articlesData;
                }
                
                // JSON Bin formatı
                const dataToSave = {
                    articles: updatedArticles,
                    lastUpdated: new Date().toISOString()
                };
                
                console.log('Saving to JSON Bin:', dataToSave);
                
                // Save to JSON Bin
                await fetchViaProxy('', 'PUT', dataToSave, CONFIG.ARTICLES_BIN_ID);
                
                // Clear draft
                localStorage.removeItem('articleDraft');
                
                // Yerel veriyi güncelle
                articlesData = updatedArticles;
                
                // Show success message
                showToast(`Makale ${publish ? 'yayınlandı' : 'kaydedildi'}`, 'success');
                
                // Reset editor if publishing
                if (publish) {
                    resetEditor();
                    switchToSection('articles');
                    loadArticlesList();
                }
                
                return true;
            } catch (error) {
                console.error('Error saving article:', error);
                showToast('Makale kaydedilirken hata oluştu: ' + error.message, 'error');
                return false;
            }
        }

        function editArticle(id) {
            const article = articlesData.find(a => a.id == id);
            if (!article) {
                showToast('Makale bulunamadı', 'error');
                return;
            }
            
            currentArticleId = id;
            isEditing = true;
            
            // Fill form with article data
            document.getElementById('articleTitle').value = article.title || '';
            document.getElementById('articleTitleTR').value = article.title_tr || '';
            document.getElementById('articleCategory').value = article.category || '';
            document.getElementById('articleAuthor').value = article.author || 'Adem Bayazıt';
            document.getElementById('featuredImage').value = article.featured_image || '';
            document.getElementById('seoTitle').value = article.seo_title || '';
            document.getElementById('seoDescription').value = article.seo_description || '';
            document.getElementById('readingTime').value = article.reading_time || 5;
            
            // Format date for datetime-local input
            const publishDate = new Date(article.published_date || article.date);
            const localDateTime = new Date(publishDate.getTime() - publishDate.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.getElementById('publishDate').value = localDateTime;
            
            document.getElementById('featuredArticle').checked = article.featured || false;
            
            // Set editor content
            if (quillEN) quillEN.root.innerHTML = article.content || '';
            if (quillTR) quillTR.root.innerHTML = article.content_tr || '';
            
            // Set tags
            currentArticleTags = article.tags || [];
            
            // Add featured image to uploaded images
            if (article.featured_image) {
                uploadedImages = [article.featured_image];
            }
            
            renderTags();
            updateImagePreview();
            
            // Navigate to editor
            switchToSection('editor');
            document.querySelector('#editor .section-title').innerHTML = `<i class="fas fa-edit"></i> Makaleyi Düzenle: ${article.title.substring(0, 30)}...`;
        }

        function deleteArticle(id) {
            showConfirm('Bu makaleyi silmek istediğinizden emin misiniz?', async function() {
                try {
                    await loadArticles();
                    articlesData = articlesData.filter(a => a.id != id);
                    
                    const dataToSave = {
                        articles: articlesData,
                        lastUpdated: new Date().toISOString()
                    };
                    
                    await fetchViaProxy('', 'PUT', dataToSave, CONFIG.ARTICLES_BIN_ID);
                    
                    showToast('Makale silindi', 'success');
                    loadArticlesList();
                    
                    // If we're editing this article, reset editor
                    if (currentArticleId == id) {
                        resetEditor();
                    }
                } catch (error) {
                    console.error('Error deleting article:', error);
                    showToast('Makale silinirken hata oluştu', 'error');
                }
            });
        }

        function previewArticle(id) {
            const article = articlesData.find(a => a.id == id);
            if (!article) return;
            
            const modalContent = document.getElementById('previewModalContent');
            modalContent.innerHTML = `
                <h3>${article.title}</h3>
                ${article.title_tr ? `<h4>${article.title_tr}</h4>` : ''}
                <p><strong>Kategori:</strong> ${article.category}</p>
                <p><strong>Yazar:</strong> ${article.author}</p>
                <p><strong>Tarih:</strong> ${new Date(article.published_date || article.date).toLocaleDateString('tr-TR')}</p>
                <p><strong>Okuma Süresi:</strong> ${article.reading_time || 5} dakika</p>
                <hr>
                <div>${article.content}</div>
                ${article.content_tr ? `<hr><h4>Türkçe İçerik:</h4><div>${article.content_tr}</div>` : ''}
            `;
            
            showModal('previewModal');
        }

        // Email Functions
        function updateEmailArticleSelect() {
            const select = document.getElementById('emailArticleSelect');
            select.innerHTML = '<option value="">Makale seçin</option>';
            
            articlesData.forEach(article => {
                const option = document.createElement('option');
                option.value = article.id;
                option.textContent = `${article.id} - ${article.title.substring(0, 50)}${article.title.length > 50 ? '...' : ''}`;
                select.appendChild(option);
            });
        }

        async function loadEmailSection() {
            await loadArticles();
            await loadSubscribers();
            
            updateEmailArticleSelect();
            document.getElementById('emailStats').textContent = `${subscribersData.length} abone`;
        }

        async function sendEmailToSubscribers(testOnly = false) {
            const articleId = document.getElementById('emailArticleSelect').value;
            const subject = document.getElementById('emailSubject').value.trim();
            const template = document.getElementById('emailTemplate').value;
            const customMessage = document.getElementById('customMessage').value.trim();
            const testEmail = document.getElementById('testEmail').value.trim();
            
            if (!articleId) {
                showToast('Lütfen bir makale seçin', 'error');
                return;
            }
            
            if (!subject) {
                showToast('Email başlığı gereklidir', 'error');
                return;
            }
            
            const article = articlesData.find(a => a.id == articleId);
            if (!article) {
                showToast('Makale bulunamadı', 'error');
                return;
            }
            
            let recipients = testOnly ? [testEmail] : subscribersData.map(s => s.email);
            
            if (recipients.length === 0) {
                showToast(testOnly ? 'Test email adresi gerekli' : 'Gönderilecek abone bulunamadı', 'error');
                return;
            }
            
            if (testOnly && !testEmail.includes('@')) {
                showToast('Geçerli bir test email adresi girin', 'error');
                return;
            }
            
            try {
                const btnId = testOnly ? 'testEmailBtn' : 'sendEmailBtn';
                const btn = document.getElementById(btnId);
                const originalText = btn.innerHTML;
                btn.disabled = true;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Gönderiliyor...';
                
                // Create email data
                const emailData = {
                    Messages: [{
                        From: {
                            Email: "fyi@adembayazit.com",
                            Name: "Adem Bayazıt - Cybersecurity Articles"
                        },
                        To: recipients.map(email => ({ Email: email })),
                        Subject: subject.replace('{article_title}', article.title),
                        HTMLPart: generateEmailTemplate(article, customMessage, template),
                        TextPart: generateTextTemplate(article, customMessage)
                    }]
                };
                
                // Send email via Netlify function
                const response = await fetch('https://adembayazit.netlify.app/.netlify/functions/send-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        emailData: emailData
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                showToast(testOnly 
                    ? `Test email gönderildi: ${testEmail}`
                    : `Email ${recipients.length} aboneye gönderildi`,
                    'success'
                );
                
                if (!testOnly) {
                    document.getElementById('customMessage').value = '';
                }
                
            } catch (error) {
                console.error('Error sending email:', error);
                showToast('Email gönderilirken hata oluştu: ' + error.message, 'error');
            } finally {
                const btnId = testOnly ? 'testEmailBtn' : 'sendEmailBtn';
                const btn = document.getElementById(btnId);
                btn.disabled = false;
                btn.innerHTML = testOnly 
                    ? '<i class="fas fa-vial"></i> Test Gönderimi'
                    : '<i class="fas fa-paper-plane"></i> Tüm Abonelere Gönder';
            }
        }

        function previewEmail() {
            const articleId = document.getElementById('emailArticleSelect').value;
            const customMessage = document.getElementById('customMessage').value;
            const template = document.getElementById('emailTemplate').value;
            
            if (!articleId) {
                showToast('Önizleme için makale seçin', 'error');
                return;
            }
            
            const article = articlesData.find(a => a.id == articleId);
            if (!article) return;
            
            const preview = document.getElementById('emailPreviewContent');
            preview.innerHTML = generateEmailTemplate(article, customMessage, template);
        }

        function generateEmailTemplate(article, customMessage, template) {
            let templateStyle = '';
            let titleColor = '#d9534f';
            
            if (template === 'weekly_digest') {
                templateStyle = 'border-left: 4px solid #007bff; background: #f0f8ff;';
                titleColor = '#007bff';
            } else if (template === 'important_alert') {
                templateStyle = 'border-left: 4px solid #ff0000; background: #fff5f5;';
                titleColor = '#ff0000';
            }
            
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="utf-8">
                    <style>
                        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
                        .header { text-align: center; border-bottom: 2px solid #00cc00; padding-bottom: 15px; margin-bottom: 25px; }
                        .article-card { padding: 20px; border-radius: 10px; margin: 20px 0; ${templateStyle} }
                        .btn { background: #00cc00; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold; }
                        .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; font-size: 12px; color: #666; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Adem Bayazıt</h1>
                        <p>Cybersecurity Articles</p>
                    </div>
                    
                    <h2>Yeni Makale Yayınlandı</h2>
                    
                    <div class="article-card">
                        <h3 style="color: ${titleColor}; margin-top: 0;">${article.title}</h3>
                        
                        ${article.title_tr ? `<h4>${article.title_tr}</h4>` : ''}
                        
                        <p><strong>Kategori:</strong> ${article.category}</p>
                        <p><strong>Yayın Tarihi:</strong> ${new Date(article.published_date || article.date).toLocaleDateString('tr-TR')}</p>
                        
                        ${customMessage ? `
                        <div style="background: #e7f3ff; padding: 15px; border-radius: 5px; margin: 15px 0;">
                            <strong>Özel Mesaj:</strong> ${customMessage}
                        </div>
                        ` : ''}
                        
                        <p><strong>Özet:</strong> ${article.content.substring(0, 200).replace(/<[^>]*>/g, '')}...</p>
                        
                        <a href="https://adembayazit.com/article#${article.id}" class="btn">
                            Makaleyi Oku
                        </a>
                    </div>
                    
                    <div class="footer">
                        <p>Bu email'i Adem Bayazıt'ın Cybersecurity Articles aboneliğinden aldınız.</p>
                        <p>
                            <a href="https://adembayazit.com/unsubscribe" style="color: #666;">Abonelikten Çık</a> | 
                            <a href="https://adembayazit.com/articles" style="color: #666;">Tüm Makaleler</a>
                        </p>
                    </div>
                </body>
                </html>
            `;
        }

        function generateTextTemplate(article, customMessage) {
            return `
YENİ MAKALE: ${article.title}

${article.title_tr ? `Türkçe Başlık: ${article.title_tr}` : ''}

Kategori: ${article.category}
Yayın Tarihi: ${new Date(article.published_date || article.date).toLocaleDateString('tr-TR')}

${customMessage ? `Özel Mesaj: ${customMessage}\n\n` : ''}

Özet: ${article.content.substring(0, 200).replace(/<[^>]*>/g, '')}...

Makaleyi okumak için: https://adembayazit.com/articles#${article.id}

---
Adem Bayazıt - Cybersecurity Articles
Abonelikten çıkmak için: https://adembayazit.com/unsubscribe
            `;
        }

        // Settings Functions
        async function saveSettings() {
            // Implementation for saving settings
            showToast('Ayarlar kaydedildi', 'success');
        }

        async function changePassword() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!newPassword || !confirmPassword) {
                showToast('Lütfen tüm alanları doldurun', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showToast('Şifreler eşleşmiyor', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('Şifre en az 6 karakter olmalı', 'error');
                return;
            }
            
            const hash = await sha256(newPassword);
            
            // Update config
            CONFIG.ADMIN_PASSWORD_HASH = hash;
            localStorage.setItem('adminPasswordHash', hash);
            
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            
            showToast('Şifre başarıyla değiştirildi', 'success');
        }

        function createBackup() {
            const backup = {
                articles: articlesData,
                subscribers: subscribersData,
                createdAt: new Date().toISOString(),
                version: '1.0'
            };
            
            const backupStr = JSON.stringify(backup, null, 2);
            const blob = new Blob([backupStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `backup-${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            document.getElementById('lastBackup').value = new Date().toLocaleString('tr-TR');
            showToast('Yedekleme oluşturuldu', 'success');
        }

        function exportData() {
            const data = {
                articles: articlesData,
                subscribers: subscribersData
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'articles-data.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('JSON verisi indirildi', 'success');
        }

        // Initialize Admin Panel
        function showAdminPanel() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            
            // Initialize components
            initEditor();
            setupNavigation();
            
            // Load initial data
            loadDashboard();
            
            // Setup event listeners
            setupEventListeners();
        }

        function setupEventListeners() {
            // Save draft button
            document.getElementById('saveDraftBtn').addEventListener('click', saveDraft);
            
            // Publish article button
            document.getElementById('publishArticleBtn').addEventListener('click', () => saveArticle(true));
            
            // Refresh preview button
            document.getElementById('refreshPreview').addEventListener('click', function() {
                const articleData = getArticleFormData();
                const preview = document.getElementById('articlePreview');
                preview.innerHTML = `
                    <h3>${articleData.title || 'Başlıksız'}</h3>
                    ${articleData.title_tr ? `<h4>${articleData.title_tr}</h4>` : ''}
                    <p><strong>Kategori:</strong> ${articleData.category || 'Belirtilmemiş'}</p>
                    <p><strong>Yazar:</strong> ${articleData.author}</p>
                    <p><strong>Okuma Süresi:</strong> ${articleData.reading_time} dakika</p>
                    <hr>
                    <div>${articleData.content || 'İçerik yok'}</div>
                    ${articleData.content_tr ? `<hr><h4>Türkçe İçerik:</h4><div>${articleData.content_tr}</div>` : ''}
                `;
                showToast('Önizleme yenilendi', 'info');
            });
            
            // Add subscriber button
            document.getElementById('addSubscriberBtn').addEventListener('click', async function() {
                const email = document.getElementById('addSubscriberEmail').value.trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (!emailRegex.test(email)) {
                    showToast('Geçerli bir email adresi girin', 'error');
                    return;
                }
                
                try {
                    await loadSubscribers();
                    
                    if (subscribersData.some(s => s.email === email)) {
                        showToast('Bu email zaten abone', 'warning');
                        return;
                    }
                    
                    const newSubscriber = {
                        email: email,
                        subscribedAt: new Date().toISOString(),
                        status: 'active'
                    };
                    
                    subscribersData.push(newSubscriber);
                    
                    const dataToSave = {
                        subscribers: subscribersData,
                        lastUpdated: new Date().toISOString()
                    };
                    
                    await fetchViaProxy('', 'PUT', dataToSave, CONFIG.SUBSCRIBERS_BIN_ID);
                    
                    document.getElementById('addSubscriberEmail').value = '';
                    showToast('Abone eklendi', 'success');
                    loadSubscribers();
                } catch (error) {
                    console.error('Error adding subscriber:', error);
                    showToast('Abone eklenirken hata oluştu', 'error');
                }
            });
            
            // Export subscribers button
            document.getElementById('exportSubscribersBtn').addEventListener('click', function() {
                const csv = 'Email,Kayıt Tarihi,Durum\n' + 
                    subscribersData.map(s => 
                        `${s.email},${s.subscribedAt || new Date().toISOString()},${s.status || 'active'}`
                    ).join('\n');
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'subscribers.csv';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Abone listesi indirildi', 'success');
            });
            
            // Email buttons
            document.getElementById('testEmailBtn').addEventListener('click', () => sendEmailToSubscribers(true));
            document.getElementById('sendEmailBtn').addEventListener('click', () => {
                showConfirm('Tüm abonelere email göndermek istediğinizden emin misiniz?', () => sendEmailToSubscribers(false));
            });
            document.getElementById('previewEmailBtn').addEventListener('click', previewEmail);
            document.getElementById('refreshEmailStats').addEventListener('click', loadEmailSection);
            
            // Settings buttons
            document.getElementById('saveGeneralSettings').addEventListener('click', saveSettings);
            document.getElementById('saveSecuritySettings').addEventListener('click', changePassword);
            document.getElementById('createBackupBtn').addEventListener('click', createBackup);
            document.getElementById('exportDataBtn').addEventListener('click', exportData);
            
            // Modal close buttons
            document.getElementById('closePreview').addEventListener('click', () => hideModal('previewModal'));
            
            // Load draft if available
            loadDraft();
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already authenticated
            if (checkAuth()) {
                showAdminPanel();
            } else {
                document.getElementById('loginScreen').style.display = 'flex';
            }
            
            // Setup login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Setup logout button
            document.getElementById('logoutBtn')?.addEventListener('click', function() {
                showConfirm('Çıkış yapmak istediğinizden emin misiniz?', logout);
            });
            
            // Close modals when clicking outside
            document.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    hideModal(event.target.id);
                }
            });
            
            // Handle escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    hideModal('previewModal');
                    hideModal('confirmModal');
                    if (window.innerWidth <= 992 && isSidebarOpen) {
                        closeSidebar();
                    }
                }
            });
            
            // Auto-focus password field
            document.getElementById('adminPassword')?.focus();
        });
    </script>
</body>
</html>